
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Threads vs Events - Troglobit</title>
  <meta name="author" content="Joachim Nilsson">

  
  <meta name="description" content="This is a rant about something I recently found to be a long standing
battle line in the world of programming,
Lau78.
The event vs thread based &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://troglobit.github.io/blog/2013/08/06/event-handling">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Troglobit" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/favicon.png" rel="icon">
<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Troglobit</a></h1>
  
    <h2>&#8220;Elegance is not a dispensable luxury&#8221; &mdash; Edsger Wybe Dijkstra</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="troglobit.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/finit.html">Finit</a></li>
  <li><a href="/inadyn.html">Inadyn</a></li>
  <li><a href="/smcroute.html">SMCRoute</a></li>
  <li><a href="/mrouted.html">mrouted</a></li>
  <li><a href="/pimd.html">pimd</a></li>
  <li><a href="/uftpd.html">uftpd</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Threads vs Events</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-06T14:20:00+02:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:20 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>This is a rant about something I recently found to be a long standing
battle line in the world of programming,
<a href="http://cgi.di.uoa.gr/~mema/courses/mde518/papers/lauer78.pdf">Lau78</a>.
The event vs thread based approach to programming.  As rants go I do
not aspire to deliver a clear or logical message, what so ever.  It&rsquo;s
basically just something I need to get off my chest.</p>

<p>It was not until 2007 I first learned about the event based approach
to programming and event libraries like
<a href="http://libevent.org/">libevent</a> and
<a href="http://software.schmorp.de/pkg/libev.html">libev</a>.  Up until that
point the silver bullet everyone was using was &hellip; Threads.</p>

<!-- more -->


<p>I don&rsquo;t really know when it all started, maybe it was the Linux
revolution, the first NPTL release with GLIBC, Java or Solaris.
Nevertheless, from my point of view it was sometime in the mid 90&rsquo;s
during my time at university that the use of threads was starting to
become prevalent.</p>

<p><span class='pullquote-right' data-pullquote='With the rise of the thread based model of programming we now had a
hammer, and every problem looked like a nail.'>
With the rise of the thread based model of programming we now had a
hammer, and every problem looked like a nail.  I had a gut feeling
there was something really wrong with using threads for every
conceivable program, but I could not find a way to express it, so I
chugged away with my threads, semaphores and condition variables.  I
convinced myself I was happy like this.
</span></p>

<p>Of course I knew about the event based approach, but it was more or
less dismissed as a thing of the past, a while(1) loop to mimic the
behavior of PLC&rsquo;s.  So almost every program I wrote, and every program
I took over from others, were like Indiana Jones types of mazes full
of deadlocks and race conditions.</p>

<p>I thought I did something wrong, and so did many others like me.  I
spent days and nights trying to understand, refactor, and redesign
threaded programs.  What I found was a doubt that the thread based
model actually didn&rsquo;t suit every problem,
<a href="http://www.cc.gatech.edu/classes/AY2009/cs4210_fall/papers/ousterhout-threads.pdf">Ous96</a>.
There are quite a few domains, however, where thread based models
shine. Usually in languages that come with thread support built-in,
like Erlang.</p>

<p>Most of the programs I work with today are network daemons.  Meaning
they are essentially message based applications that spend a lot of
time waiting for an event to occur: receiving a data frame, waiting
for a timer to expire, a signal to be raised, etc.  Of course threads
can be used for this, but it is a lot simpler to employ an event based
framework instead.  Also, they are all written in C for speed and
portability between different UNIX systems.  For that domain, where I
currently make my living, it will be difficult to convince me to ever
look at threads again.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Joachim Nilsson</span></span>

      




<time class='entry-date' datetime='2013-08-06T14:20:00+02:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:20 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/open-source/'>open source</a>, <a class='category' href='/blog/categories/projects/'>projects</a>, <a class='category' href='/blog/categories/smcroute/'>smcroute</a>, <a class='category' href='/blog/categories/threads-vs-events/'>threads vs events</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://troglobit.github.io/blog/2013/08/06/event-handling/" data-via="troglobit" data-counturl="http://troglobit.github.io/blog/2013/08/06/event-handling/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/07/12/new-open-source-releases/" title="Previous Post: New Open Source Releases">&laquo; New Open Source Releases</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/08/09/on-the-linearity-of-time/" title="Next Post: On the Linearity of Time">On the Linearity of Time &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Projects</h1>
  <ul>
    <li><a href="/finit.html">Fast Init Replacement</a></li>
    <li><a href="/uftpd.html">Micro TFTP/FTP Daemon</a></li>
    <li><a href="/tetris.html">Micro Tetris&trade;</a></li>
    <li><a href="/snake.html">Micro Snake</a></li>
    <li><a href="/editline.html">Minix Editline</a></li>
    <li><a href="/inadyn.html">Inadyn DDNS Client</a></li>
    <li><a href="/multicast-howto.html">Multicast HowTo</a></li>
    <li><a href="/mrouted.html">The Original Multicast Routing Daemon</a></li>
    <li><a href="/pimd.html">The Original PIM-SM Daemon</a></li>
    <li><a href="/smcroute.html">SMCRoute Static Multicast Routing</a></li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/06/inetd-support-in-finit-v1-dot-12/">Inetd Support in Finit v1.12</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/24/finit-v1-dot-11-released/">Finit v1.11 Released!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/12/rant-all-the-c-compiler-warnings-dot-dot-dot/">Rant: All the C Compiler Warnings &#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/08/recent-open-source-work/">Recent Open Source Work</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/02/blog-restoration-project-now-also-on-github-pages/">Blog Restoration Project</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/troglobit">@troglobit</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'troglobit',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Latest Tweets</h1>

  <a class="twitter-timeline" data-dnt="true"
     href="https://twitter.com/troglobit"
     data-widget-id="365667052100415488">Tweets by @troglobit</a>
  <script>!function(d,s,id){var
    js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>




  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Joachim Nilsson -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
