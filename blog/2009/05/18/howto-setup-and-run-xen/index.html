
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Howto Setup and Run Xen - Troglobit</title>
  <meta name="author" content="Joachim Nilsson">

  
  <meta name="description" content="This is an extremly brief and quick Xen
tutorial. There are lots of them already, see your wiki,
HowtoForge or other places for a starter guide. This &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://troglobit.github.io/blog/2009/05/18/howto-setup-and-run-xen">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Troglobit" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/favicon.png" rel="icon">
<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Troglobit</a></h1>
  
    <h2>&#8220;Elegance is not a dispensable luxury&#8221; &mdash; Edsger Wybe Dijkstra</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="troglobit.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/finit.html">Finit</a></li>
  <li><a href="/inadyn.html">Inadyn</a></li>
  <li><a href="/smcroute.html">SMCRoute</a></li>
  <li><a href="/mrouted.html">mrouted</a></li>
  <li><a href="/pimd.html">pimd</a></li>
  <li><a href="/uftpd.html">uftpd</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Howto Setup and Run Xen</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2009-05-18T01:51:42+02:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2009</span></span> <span class='time'>1:51 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>This is an extremly brief and quick <a href="http://www.xenproject.org/">Xen</a>
tutorial. There are lots of them already, see your <DISTRIBUTION> wiki,
HowtoForge or other places for a starter guide. This particular HowTo
deals with setting up Xen as easy as possible using Ubuntu 8.04 LTS as
host operating system (dom0 in Xen terms) and Ubuntu 9.04 as guest
operating systems (domU in Xen lingo).</p>

<p>Ubuntu 8.04 LTS comes with a Xen kernel that can run as dom0. This is
quite important, so pay attention to setting that up correctly. For this
I recommend the
<a href="http://howtoforge.org/high-performance-xen-on-ubuntu-8.04-amd64">HowtoForge Tutorial</a>.</p>

<p><em>Note:</em> you will need to upgrade the default Xen 3.2 to 3.3 to be able
to run the latest distributions as guest OS. See this
<a href="https://answers.launchpad.net/ubuntu/+question/50326">Ubuntu question</a>
for more insight. To get Xen 3.3, simply activate the Hardy backports
repository in your <code>/etc/apt/sources.list</code> and, as usual, pay attention
to your <code>/boot/grub/menu.lst</code> so that it points out the Xen 3.3 image in
the <code>defaults=</code> option.</p>

<p>When done with the basic setup you should install pygrub on your host,
this is a truly magic piece of software that makes it possible to boot
all guests using their own kernel and modules.  See the
<a href="http://wiki.debian.org/PyGrub">Debian wiki</a> for some details on install
and setup.  Then ignore what you read and do like this:</p>

<pre><code># /var/lib/xend/domains/example/config.sxp - Xen domU example.
# Note the order of partitions in disk=[], the first listed partition
# is the partition where your /boot (grub) resides. 
bootloader  = '/usr/bin/pygrub'

builder     = 'linux'
memory      = '2048'
root        = '/dev/xvda1 ro'

disk        = [
  'phy:/dev/disk/by-uuid/df3418f5-2fc3-443c-8e64-4395828dc678,xvda1,w',
  'phy:/dev/disk/by-uuid/acecf01e-c4d9-4a7b-b18a-681c69f71173,xvda2,w',
]

name        = 'example'

vif         = [ 'bridge=eth1' ]
dhcp        = "off"
ip          = "12.34.56.78"
netmask     = "255.255.255.252"
gateway     = "12.34.56.77"
hostname    = "example"

on_poweroff = 'destroy'
on_reboot   = 'restart'
on_crash    = 'restart'
vcpus       = 1
extra       = 'xencons=tty1'
</code></pre>

<p>When installing grub on your guest, don&rsquo;t pay any attention to Grub
complaining about not being able to map <code>/dev/xvda1</code> to a BIOS disk.
pyGrub doesn&rsquo;t care about such wordly things as physical disks.  Just
make sure the <code>/boot</code> directory&rsquo;s partition (often <code>/</code>) is the first
listed in the <code>disk=[]</code> array above.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Joachim Nilsson</span></span>

      




<time class='entry-date' datetime='2009-05-18T01:51:42+02:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2009</span></span> <span class='time'>1:51 am</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://troglobit.github.io/blog/2009/05/18/howto-setup-and-run-xen/" data-via="troglobit" data-counturl="http://troglobit.github.io/blog/2009/05/18/howto-setup-and-run-xen/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2009/04/10/learning-about-git/" title="Previous Post: Learning About GIT">&laquo; Learning About GIT</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/02/17/resurrection/" title="Next Post: Resurrection">Resurrection &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Projects</h1>
  <ul>
    <li><a href="/finit.html">Fast Init Replacement</a></li>
    <li><a href="/uftpd.html">Micro TFTP/FTP Daemon</a></li>
    <li><a href="/tetris.html">Micro Tetris&trade;</a></li>
    <li><a href="/snake.html">Micro Snake</a></li>
    <li><a href="/editline.html">Minix Editline</a></li>
    <li><a href="/inadyn.html">Inadyn DDNS Client</a></li>
    <li><a href="/multicast-howto.html">Multicast HowTo</a></li>
    <li><a href="/mrouted.html">The Original Multicast Routing Daemon</a></li>
    <li><a href="/pimd.html">The Original PIM-SM Daemon</a></li>
    <li><a href="/smcroute.html">SMCRoute Static Multicast Routing</a></li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/07/02/howto-using-lite-with-a-git-based-application/">HowTo: Using -lite With a GIT-based Application</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/01/howto-push-to-multiple-git-repos-with-one-command/">HowTo: Push to Multiple GIT Repos With One Command</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/30/howto-apache-with-gitweb-on-debian-8-dot-1/">HowTo: Apache With Gitweb on Debian 8.1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/06/inetd-support-in-finit-v1-dot-12/">Inetd Support in Finit v1.12</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/24/finit-v1-dot-11-released/">Finit v1.11 Released!</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/troglobit">@troglobit</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'troglobit',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Latest Tweets</h1>

  <a class="twitter-timeline" data-dnt="true"
     href="https://twitter.com/troglobit"
     data-widget-id="365667052100415488">Tweets by @troglobit</a>
  <script>!function(d,s,id){var
    js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>




  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Joachim Nilsson -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
