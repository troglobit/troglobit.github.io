<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Joachim Wiberg ">
<meta name="description" content="Had an interesting conversation with a buddy last night. It started out as a shift-reduce problem with Bison and ended up a ping-pong of useful UNIX API:s. We concluded that despite having worked professionally with UNIX for over two decades, it is still very satisfying finding gems like these.
Most people are completely unaware they exist and end up rolling their own (buggy) implementations. For instance, string manipulation and various forms of linked lists. Which is why I many years ago extracted the frog DNA from Finit to a separate library called libite, or -lite for short. It imports the OpenBSD strlcpy() family of API:s, up-to-date queue.h with the _SAFE iterators, and more. Some people like libbsd for this, but I&amp;rsquo;ve found many of the ports incomplete and unsafe and prefer to stay closer to the upstream *BSD versions.
Update: This post was originally written Nov 14, 2015. It was a Saturday and I remember being extremely inspired when I wrote it. I&amp;rsquo;ve continued adding to it over the years, and still do. So, as of Jul 2, 2017 I&amp;rsquo;m bumping the modification date each time I add something new :-)
" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://troglobit.com/post/2020-02-22-useful-unix-apis/" />


    <title>
        
            Useful UNIX API:s :: Joachim Wiberg 
        
    </title>





<link rel="stylesheet" href="https://troglobit.com/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css" integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE=">



    <link rel="apple-touch-icon" sizes="180x180" href="https://troglobit.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://troglobit.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://troglobit.com/favicon-16x16.png">
    <link rel="manifest" href="https://troglobit.com/site.webmanifest">
    <link rel="mask-icon" href="https://troglobit.com/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="https://troglobit.com/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="Useful UNIX API:s">
<meta itemprop="description" content="Had an interesting conversation with a buddy last night.  It started out
as a shift-reduce problem with Bison and ended up a ping-pong of useful
UNIX API:s.  We concluded that despite having worked professionally with
UNIX for over two decades, it is still very satisfying finding gems like
these.
Most people are completely unaware they exist and end up rolling their
own (buggy) implementations.  For instance, string manipulation and
various forms of linked lists.  Which is why I many years ago extracted
the frog DNA from Finit to a
separate library called libite,
or -lite for short.  It imports the OpenBSD strlcpy() family of API:s,
up-to-date queue.h with the _SAFE iterators, and more.  Some people
like libbsd for this, but I&rsquo;ve
found many of the ports incomplete and unsafe and prefer to stay closer
to the upstream *BSD versions.
Update: This post was originally written Nov 14, 2015.  It was a
Saturday and I remember being extremely inspired when I wrote it.  I&rsquo;ve
continued adding to it over the years, and still do.  So, as of Jul 2,
2017 I&rsquo;m bumping the modification date each time I add something new :-)"><meta itemprop="datePublished" content="2020-02-22T09:45:00+00:00" />
<meta itemprop="dateModified" content="2020-02-22T09:45:00+00:00" />
<meta itemprop="wordCount" content="426">
<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Useful UNIX API:s"/>
<meta name="twitter:description" content="Had an interesting conversation with a buddy last night.  It started out
as a shift-reduce problem with Bison and ended up a ping-pong of useful
UNIX API:s.  We concluded that despite having worked professionally with
UNIX for over two decades, it is still very satisfying finding gems like
these.
Most people are completely unaware they exist and end up rolling their
own (buggy) implementations.  For instance, string manipulation and
various forms of linked lists.  Which is why I many years ago extracted
the frog DNA from Finit to a
separate library called libite,
or -lite for short.  It imports the OpenBSD strlcpy() family of API:s,
up-to-date queue.h with the _SAFE iterators, and more.  Some people
like libbsd for this, but I&rsquo;ve
found many of the ports incomplete and unsafe and prefer to stay closer
to the upstream *BSD versions.
Update: This post was originally written Nov 14, 2015.  It was a
Saturday and I remember being extremely inspired when I wrote it.  I&rsquo;ve
continued adding to it over the years, and still do.  So, as of Jul 2,
2017 I&rsquo;m bumping the modification date each time I add something new :-)"/>



    <meta property="og:title" content="Useful UNIX API:s" />
<meta property="og:description" content="Had an interesting conversation with a buddy last night.  It started out
as a shift-reduce problem with Bison and ended up a ping-pong of useful
UNIX API:s.  We concluded that despite having worked professionally with
UNIX for over two decades, it is still very satisfying finding gems like
these.
Most people are completely unaware they exist and end up rolling their
own (buggy) implementations.  For instance, string manipulation and
various forms of linked lists.  Which is why I many years ago extracted
the frog DNA from Finit to a
separate library called libite,
or -lite for short.  It imports the OpenBSD strlcpy() family of API:s,
up-to-date queue.h with the _SAFE iterators, and more.  Some people
like libbsd for this, but I&rsquo;ve
found many of the ports incomplete and unsafe and prefer to stay closer
to the upstream *BSD versions.
Update: This post was originally written Nov 14, 2015.  It was a
Saturday and I remember being extremely inspired when I wrote it.  I&rsquo;ve
continued adding to it over the years, and still do.  So, as of Jul 2,
2017 I&rsquo;m bumping the modification date each time I add something new :-)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://troglobit.com/post/2020-02-22-useful-unix-apis/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-22T09:45:00+00:00" />
<meta property="article:modified_time" content="2020-02-22T09:45:00+00:00" />





    <meta property="article:section" content="unix" />

    <meta property="article:section" content="programming" />



    <meta property="article:published_time" content="2020-02-22 09:45:00 &#43;0000 UTC" />











    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://troglobit.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">&gt;</span>
            <span class="logo__text ">
                $ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://troglobit.com/about/">About</a></li><li><a href="https://troglobit.com/posts/">Blog</a></li><li><a href="https://troglobit.com/howtos/">HowTos</a></li><li><a href="https://troglobit.com/projects/">Projects</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        2 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://troglobit.com/post/2020-02-22-useful-unix-apis/">Useful UNIX API:s</a>
      </h1>

      

      

      

      <div class="post-content">
        <p>Had an interesting conversation with a buddy last night.  It started out
as a shift-reduce problem with Bison and ended up a ping-pong of useful
UNIX API:s.  We concluded that despite having worked professionally with
UNIX for over two decades, it is still very satisfying finding gems like
these.</p>
<p>Most people are completely unaware they exist and end up rolling their
own (buggy) implementations.  For instance, string manipulation and
various forms of linked lists.  Which is why I many years ago extracted
the <em>frog DNA</em> from <a href="https://github.com/troglobit/finit/">Finit</a> to a
separate library called <a href="https://github.com/troglobit/libite/">libite</a>,
or -lite for short.  It imports the OpenBSD <code>strlcpy()</code> family of API:s,
up-to-date <code>queue.h</code> with the <code>_SAFE</code> iterators, and more.  Some people
like <a href="https://libbsd.freedesktop.org/wiki/">libbsd</a> for this, but I&rsquo;ve
found many of the ports incomplete and unsafe and prefer to stay closer
to the upstream *BSD versions.</p>
<p><strong>Update:</strong> This post was originally written Nov 14, 2015.  It was a
Saturday and I remember being extremely inspired when I wrote it.  I&rsquo;ve
continued adding to it over the years, and still do.  So, as of Jul 2,
2017 I&rsquo;m bumping the modification date each time I add something new :-)</p>
<h2 id="sysv-searchh">SysV <code>search.h</code></h2>
<p>Mangage a <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/insque.html">simple queue</a>:</p>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/insque.3.html"><code>insque()</code></a>,</li>
<li><a href="http://man7.org/linux/man-pages/man3/remque.3.html"><code>remque()</code></a>,</li>
</ul>
<p>Manage <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/hcreate.html">hash search table</a>:</p>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/hsearch.3.html"><code>hsearch()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/hcreate.3.html"><code>hcreate()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/hdestroy.3.html"><code>hdestroy()</code></a></li>
</ul>
<p>Manage a <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/tsearch.html">binary search tree</a>:</p>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/tsearch.3.html"><code>tsearch()</code></a>,</li>
<li><a href="http://man7.org/linux/man-pages/man3/tfind.3.html"><code>tfind()</code></a>,</li>
<li><a href="http://man7.org/linux/man-pages/man3/tdelete.3.html"><code>tdelete()</code></a>,</li>
<li><a href="http://man7.org/linux/man-pages/man3/twalk.3.html"><code>twalk()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/tdestroy.3.html"><code>tdestroy()</code></a>,</li>
</ul>
<p><a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/lsearch.html">Linear search</a> and update:</p>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/lfind.3.html"><code>lfind()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/lsearch.3.html"><code>lsearch()</code></a></li>
</ul>
<h2 id="bsd-sysqueueh">BSD <code>sys/queue.h</code></h2>
<p><a href="https://www.freebsd.org/cgi/man.cgi?query=queue&amp;sektion=3">This header</a> has lots of macros for handling various forms of
linked lists.  The version in GLIBC is a bit behind the BSD&rsquo;s, because
the latter also have <code>_safe()</code> versions of some macros to aid the user
in some tricky cases, e.g. when removing entries while iterating.</p>
<p>Several types of lists are supported:</p>
<ul>
<li>LIST: Doubly linked list</li>
<li>SLIST: Single linked list</li>
<li>STAILQ: Single linked tail queue</li>
<li>SIMPLEQ: Simple queue</li>
<li>TAILQ: Tail queue</li>
</ul>
<p>Here&rsquo;s a few of them, this example for doubly linked lists:</p>
<ul>
<li><code>LIST_INIT()</code></li>
<li><code>LIST_EMPTY()</code></li>
<li><code>LIST_FIRST()</code></li>
<li><code>LIST_NEXT()</code></li>
<li><code>LIST_REMOVE()</code></li>
<li><code>LIST_FOREACH()</code></li>
<li><code>LIST_INSERT_AFTER()</code></li>
<li><code>LIST_INSERT_BEFORE()</code></li>
<li><code>LIST_INSERT_HEAD()</code></li>
</ul>
<p>I wrote a <a href="https://github.com/troglobit/toolbox/blob/master/tailq-demo.c">demo of the TAILQ API</a> a couple of years ago.</p>
<h2 id="other-noteworthy-apis">Other Noteworthy API&rsquo;s</h2>
<p>Other (standard/POSIX) functions worthy of mentioning here are:</p>
<h3 id="stdioh"><code>stdio.h</code></h3>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/fmemopen.3.html"><code>fmemopen()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/getdelim.3.html"><code>getdelim()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/getline.3.html"><code>getline()</code></a></li>
</ul>
<h3 id="stdlibh"><code>stdlib.h</code></h3>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/atexit.3.html"><code>atexit()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/bsearch.3.html"><code>bsearch()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/realpath.3.html"><code>realpath()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/qsort.3.html"><code>qsort()</code></a></li>
</ul>
<h3 id="globh"><code>glob.h</code></h3>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/glob.3.html"><code>glob()</code></a></li>
</ul>
<h3 id="fnmatchh"><code>fnmatch.h</code></h3>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/fnmatch.3.html"><code>fnmatch()</code></a></li>
</ul>
<h3 id="ftsh"><code>fts.h</code></h3>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/fts_open.3.html"><code>fts_open()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/fts_read.3.html"><code>fts_read()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/fts_close.3.html"><code>fts_close()</code></a></li>
</ul>
<h3 id="ftwh"><code>ftw.h</code></h3>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/ftw.3.html"><code>ftw()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/nftw.3.html"><code>nftw()</code></a></li>
</ul>
<h3 id="unistdh"><code>unistd.h</code></h3>
<ul>
<li><a href="http://man7.org/linux/man-pages/man2/access.2.html"><code>access()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man2/alarm.2.html"><code>alarm()</code></a>,
<a href="http://man7.org/linux/man-pages/man2/pause.2.html"><code>pause()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/crypt.3.html"><code>crypt()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/daemon.3.html"><code>daemon()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man2/pipe.2.html"><code>pipe()</code></a></li>
<li><a href="http://man7.org/linux/man-pages/man3/profil.3.html"><code>profil()</code></a></li>
</ul>
<h3 id="wordexph"><code>wordexp.h</code></h3>
<ul>
<li><a href="http://man7.org/linux/man-pages/man3/wordexp.3.html"><code>wordexp()</code></a></li>
</ul>
<p><strong>Note:</strong> API&rsquo;s specific to GNU or BSD are not included, but there are
<em>many</em> more useful functions on your specific OS, in case you do not
need to write code that is portable across different UNIX platforms.
Examples can be <code>unshare()</code> and <code>clone()</code> on Linux and <code>pledge()</code> on
OpenBSD, all highly useful but also very specific.</p>
      </div>
    </article>

    <hr />

    <div class="post-info">
      
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>

        <span class="tag"><a href="https://troglobit.com/categories/unix/">unix</a></span>
        <span class="tag"><a href="https://troglobit.com/categories/programming/">programming</a></span>
        
    </p>


      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        426 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2020-02-22 10:45
        

         
          
        
      </p>
    </div>

    
    <div class="pagination">
        

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://troglobit.com/2017/09/30/set-up-a-debian-ubuntu-apt-repository/">
                    <span class="button__icon">←</span>
                    <span class="button__text">Set up a Debian/Ubuntu APT Repository</span>
                </a>
            </span>
            

            
            <span class="button next">
                <a href="https://troglobit.com/post/2019-11-03-bsd-syslogd-in-linux/">
                    <span class="button__text">BSD syslogd in Linux</span>
                    <span class="button__icon">→</span>
                </a>
            </span>
            
        </div>
    </div>


    

    

    

  </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2006</span>
            <span><a href="https://troglobit.com/">Joachim Wiberg</a></span>
            <span>UNIX&trade; 4Life! &#9994;</span>
            
            
        </div>
    </div>
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="https://troglobit.com/bundle.min.46e438bd2eca7eb6358c700b40f6f56b22ab0b92503ecc11a2d8e4bcc610b8b4da83e5ea3d3e84fdb5f3c3c765744b9f5bbaf43cf5a027910be07ee39a9c12a1.js" integrity="sha512-RuQ4vS7KfrY1jHALQPb1ayKrC5JQPswRotjkvMYQuLTag&#43;XqPT6E/bXzw8dldEufW7r0PPWgJ5EL4H7jmpwSoQ=="></script>




    </body>
</html>
