<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Joachim Wiberg">
    <meta name="description" content="Alpine Linux is an amazing little operating
system.  It&rsquo;s small, boots quick, and easy to use.  The size alone makes
it very attractive to container builders.

This blog post details how to set Alpine up with the Finit init system,
replacing the default OpenRC.">
    <meta name="keywords" content="blog,developer,personal">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Alpine Linux with Finit"/>
<meta name="twitter:description" content="Alpine Linux is an amazing little operating
system.  It&rsquo;s small, boots quick, and easy to use.  The size alone makes
it very attractive to container builders.

This blog post details how to set Alpine up with the Finit init system,
replacing the default OpenRC."/>

    <meta property="og:title" content="Alpine Linux with Finit" />
<meta property="og:description" content="Alpine Linux is an amazing little operating
system.  It&rsquo;s small, boots quick, and easy to use.  The size alone makes
it very attractive to container builders.

This blog post details how to set Alpine up with the Finit init system,
replacing the default OpenRC." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://troglobit.com/post/2021-02-12-alpine-linux-with-finit/" />
<meta property="article:published_time" content="2021-02-12T07:24:06+01:00" />
<meta property="article:modified_time" content="2021-02-12T07:24:06+01:00" />


    <title>
  Alpine Linux with Finit · The Last Outpost
</title>

    
      <link rel="canonical" href="https://troglobit.com/post/2021-02-12-alpine-linux-with-finit/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css" integrity="sha256-gsmEoJAws/Kd3CjuOQzLie5Q3yshhvmo7YNtBG7aaEY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://troglobit.com/css/coder.min.9836c03fe5c87d102278a33e86d0591ef36c89b1e17e8e547ebf84c05cee010e.css" integrity="sha256-mDbAP&#43;XIfRAieKM&#43;htBZHvNsibHhfo5Ufr&#43;EwFzuAQ4=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="https://troglobit.com/css/coder-dark.min.717236c74e0a5208ef73964a9f44c6b443b689a95b270d8b2a40d0c012460dac.css" integrity="sha256-cXI2x04KUgjvc5ZKn0TGtEO2ialbJw2LKkDQwBJGDaw=" crossorigin="anonymous" media="screen" />
      
    

    
      <link rel="stylesheet" href="https://troglobit.com/css/extra.css" />
    

    

    <link rel="icon" type="image/png" href="https://troglobit.com/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://troglobit.com/favicon.ico" sizes="16x16">

    <link rel="apple-touch-icon" href="https://troglobit.com/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://troglobit.com/images/apple-touch-icon.png">

    

    <meta name="generator" content="Hugo 0.68.3" />
  </head>

  
  
    
  
  <body class="colorscheme-auto"
        onload=""
  >
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://troglobit.com/">
      The Last Outpost
    </a>
    
      
        <span id="dark-mode-toggle" class="float-right">
          <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
        </span>
      
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://troglobit.com/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://troglobit.com/post/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://troglobit.com/howto/">HowTos</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://troglobit.com/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://resume.troglobit.com">Resumé</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://ftp.troglobit.com">FTP</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://git.troglobit.com">GIT</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://deb.troglobit.com">DEB</a>
            </li>
          
        
        
        
          <li class="navigation-item separator">
            <span>|</span>
          </li>
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Alpine Linux with Finit</h1>
    </header>

    <p><a href="https://alpinelinux.org/">Alpine Linux</a> is an amazing little operating
system.  It&rsquo;s small, boots quick, and easy to use.  The size alone makes
it very attractive to container builders.</p>
<p><img src="https://troglobit.com/images/finit4-screenshot.png#center" alt="Alpine Linux started with Finit"></p>
<p>This blog post details how to set Alpine up with the Finit init system,
replacing the default OpenRC.</p>
<h3 id="alpine-sdk">Alpine SDK</h3>
<p>After install you need to add some more packages to build Finit from
source.  The example given here builds from GIT sources, which require a
few more steps.  Building from release tarballs is easier and does not
bring the same amount of overhead.</p>
<pre><code>apk add alpine-sdk autoconf automake libtool linux-headers
</code></pre>
<h3 id="finit-deps">Finit Deps</h3>
<p>Finit relies on two libraries that used to be built-in but now are their
own separate projects: [libite (-lite)][2] and [libuEv][3].  The former
contains basic frog DNA and the latter a small event loop that basically
is just a wrapper for Linux <code>epoll()</code> &amp; C:o.</p>
<pre><code>git clone https://github.com/troglobit/libite
git clone https://github.com/troglobit/libuev
git clone https://github.com/troglobit/finit
</code></pre>
<p>Build each of the dependencies first:</p>
<pre><code>cd libite
./autogen &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install
...
cd ../libuev
./autogen &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install
...
</code></pre>
<h3 id="finit">Finit</h3>
<p>Now lets build Finit for Alpine!</p>
<pre><code>cd ../finit
./autogen
./contrib/alpine/build.sh
...
*** Done
</code></pre>
<p>Time to wake up!  We&rsquo;re now at the critical part where we can potentially
screw things up &ndash; the installation.</p>
<blockquote>
<p>Please, read the output from the install script carefully!</p>
</blockquote>
<pre><code>./contrib/alpine/install.sh
</code></pre>
<p>The first question is easy, do you really want to install Finit?  Yes.</p>
<p>For the second question, however, <em>I recommend answering NO</em> first and
manually set <code>init=</code> in the boot loader, just to make sure everything
works OK.  You can re-run <code>install.sh</code> later to repeat the process.</p>
<pre><code>*** Install Finit as the system default IOnit (y/N)? N
*** Done
</code></pre>
<h3 id="testing">Testing</h3>
<p>Reboot your system and be quick to press the Tab key to enter the Alpine
boot loader menu.  Press Tab again to edit the kernel command line, we
want to:</p>
<ol>
<li>Remove the &lsquo;quiet&rsquo; option</li>
<li>Append the &lsquo;init=/sbin/finit&rsquo; option</li>
</ol>
<p>The second of the two is the interesting part, that&rsquo;s what tells the
kernel to not use its built-in heuristics to select the first user space
program to start, but instead start Finit.  We remove the quiet option
just to get some more debug info from the kernel and a boot progress
from Finit itself.</p>
<p>Press Enter to boot.</p>
<p>If everything worked you should see the bootup and be presented with the
login prompt, as shown below.</p>
<p>If you like the setup, you can go ahead and run the install script again
and this time answer Yes to the last question.</p>
<p>Use the <code>initctl</code> companion tool to Finit to start/stop, activate and
reload new configurations.</p>
<p>Good luck and have fun! :)</p>
  </article>
</section>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js" id="MathJax-script"></script>
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ['$', '$'], ['\\(', '\\)']
        ],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>Proudly hosted by Fosshost :: <a href="https://fosshost.org/">https://fosshost.org/</a></p>
      
      
        ©
        
        2021
         Joachim Wiberg 
      
      
      
    </section>
  </footer>

    </main>

    
      
      <script src="https://troglobit.com/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js"></script>
    

    

    

    

    

    
  </body>

</html>
