<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Joachim Wiberg ">
<meta name="description" content="Finit is a simple alternative to SysV init and systemd, originally reverse engineered from the EeePC fastinit by Claudio Matsuoka — &amp;ldquo;gaps filled with frog DNA …&amp;rdquo;
Finit supports runlevels, process monitoring, as well as task and network condition dependencies. E.g., &amp;ldquo;start this service when basic networking is available&amp;rdquo;, or &amp;ldquo;wait until syslogd has started&amp;rdquo;.
For more details, see the online documentation.
Example The GitHub finit/contrib/ section, also part of the tarball, includes examples, with sample configurations for Debian, Void, and Alpine Linux." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://troglobit.com/projects/finit/" />


    <title>
        
            Fast init for Linux systems :: Joachim Wiberg  — The Last Outpost
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://troglobit.com/main.de188b3201233c251f4fd6306dbd2cb41e408fb8846c09781b2925de7df5025c.css">


    
        <link rel="stylesheet" type="text/css" href="https://troglobit.com/css/extra.css">
    



    <link rel="apple-touch-icon" sizes="180x180" href="https://troglobit.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://troglobit.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://troglobit.com/favicon-16x16.png">
    <link rel="manifest" href="https://troglobit.com/site.webmanifest">
    <link rel="mask-icon" href="https://troglobit.com/safari-pinned-tab.svg" color="#1b1c1d">
    <link rel="shortcut icon" href="https://troglobit.com/favicon.ico">
    <meta name="msapplication-TileColor" content="#1b1c1d">
    <meta name="theme-color" content="#1b1c1d">



<meta itemprop="name" content="Fast init for Linux systems">
<meta itemprop="description" content="Finit is a simple alternative to SysV init and systemd, originally reverse engineered from the EeePC fastinit by Claudio Matsuoka — &ldquo;gaps filled with frog DNA …&rdquo;
Finit supports runlevels, process monitoring, as well as task and network condition dependencies. E.g., &ldquo;start this service when basic networking is available&rdquo;, or &ldquo;wait until syslogd has started&rdquo;.
For more details, see the online documentation.
Example The GitHub finit/contrib/ section, also part of the tarball, includes examples, with sample configurations for Debian, Void, and Alpine Linux.">
<meta itemprop="datePublished" content="2021-03-01T13:26:00&#43;01:00" />
<meta itemprop="dateModified" content="2021-03-01T13:26:00&#43;01:00" />
<meta itemprop="wordCount" content="2565">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Fast init for Linux systems"/>
<meta name="twitter:description" content="Finit is a simple alternative to SysV init and systemd, originally reverse engineered from the EeePC fastinit by Claudio Matsuoka — &ldquo;gaps filled with frog DNA …&rdquo;
Finit supports runlevels, process monitoring, as well as task and network condition dependencies. E.g., &ldquo;start this service when basic networking is available&rdquo;, or &ldquo;wait until syslogd has started&rdquo;.
For more details, see the online documentation.
Example The GitHub finit/contrib/ section, also part of the tarball, includes examples, with sample configurations for Debian, Void, and Alpine Linux."/>




    <meta property="og:title" content="Fast init for Linux systems" />
<meta property="og:description" content="Finit is a simple alternative to SysV init and systemd, originally reverse engineered from the EeePC fastinit by Claudio Matsuoka — &ldquo;gaps filled with frog DNA …&rdquo;
Finit supports runlevels, process monitoring, as well as task and network condition dependencies. E.g., &ldquo;start this service when basic networking is available&rdquo;, or &ldquo;wait until syslogd has started&rdquo;.
For more details, see the online documentation.
Example The GitHub finit/contrib/ section, also part of the tarball, includes examples, with sample configurations for Debian, Void, and Alpine Linux." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://troglobit.com/projects/finit/" />
<meta property="article:published_time" content="2021-03-01T13:26:00+01:00" />
<meta property="article:modified_time" content="2021-03-01T13:26:00+01:00" />






    <meta property="article:published_time" content="2021-03-01 13:26:00 &#43;0100 CET" />








    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://troglobit.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">&gt;</span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://troglobit.com/about/">About</a></li><li><a href="https://troglobit.com/posts/">Blog</a></li><li><a href="https://troglobit.com/howtos/">HowTos</a></li><li><a href="https://troglobit.com/projects/">Projects</a></li><li><a href="https://resume.troglobit.com">Resumé</a></li><li><a href="https://ftp.troglobit.com">FTP</a></li><li><a href="https://deb.troglobit.com">DEB</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://troglobit.com/projects/finit/">Fast init for Linux systems</a></h2>

            
            
            

            <div class="post-content">
                <p><img src="https://troglobit.com/images/finit3.png#floatright" alt="finit logo"></p>
<p>Finit is a simple alternative to <a href="https://en.wikipedia.org/wiki/Init">SysV init</a> and <a href="https://www.freedesktop.org/wiki/Software/systemd/">systemd</a>,
originally reverse engineered from the EeePC fastinit by Claudio
Matsuoka — &ldquo;gaps filled with frog DNA …&rdquo;</p>
<p>Finit supports runlevels, <a href="https://en.wikipedia.org/wiki/Process_supervision">process monitoring</a>, as well as task and
network condition dependencies.  E.g., <em>&ldquo;start this service when basic
networking is available&rdquo;</em>, or <em>&ldquo;wait until syslogd has started&rdquo;</em>.</p>
<p>For more details, see the online <a href="https://github.com/troglobit/finit/blob/master/README.md">documentation</a>.</p>
<h2 id="example">Example</h2>
<p>The <a href="https://github.com/troglobit/finit/tree/master/contrib">GitHub finit/contrib/ section</a>, also part of the tarball,
includes examples, with sample configurations for Debian, Void, and
Alpine Linux.</p>
<p><img src="https://troglobit.com/images/finit4-screenshot.png#center" alt="Alpine Linux started with Finit"></p>
<p>The buildroot derivatives <a href="https://github.com/troglobit/myLinux">myLinux</a> and <a href="https://github.com/westermo/netbox">Westermo NetBox</a> provide
examples of how to boot embedded systems with Finit.</p>
<h2 id="configuration">Configuration</h2>
<p>This example <code>/etc/finit.conf</code> can also be split up in multiple <code>.conf</code>
files in <code>/etc/finit.d</code>.  Available, but not yet enabled, services can
be placed in <code>/etc/finit.d/available</code> and enabled by an operator using
the <a href="#commands--status">initctl</a> tool.</p>
<div class="highlight"><pre class="chroma"><code class="language-ApacheConf" data-lang="ApacheConf"><span class="c"># Fallback if /etc/hostname is missing</span>
<span class="nb">host</span> default

<span class="c"># Runlevel to start after bootstrap, &#39;S&#39;, default: 2</span>
<span class="nb">runlevel</span> <span class="m">2</span>

<span class="c"># Max file size for each log file: 100 kiB, rotate max 4 copies:</span>
<span class="c"># log =&gt; log.1 =&gt; log.2.gz =&gt; log.3.gz =&gt; log.4.gz</span>
<span class="nb">log</span> size=100k count=4

<span class="c"># Services to be monitored and respawned as needed</span>
<span class="nb">service</span> [S12345] watchdogd -L -f                 -- System watchdog daemon
<span class="nb">service</span> [S12345] syslogd -n -b <span class="m">3</span> -D              -- System log daemon
<span class="nb">service</span> [S12345] &lt;pid/syslogd&gt; klogd -n          -- Kernel log daemon
<span class="nb">service</span>   [2345] lldpd -d -c -M1 -H0 -i          -- LLDP daemon (IEEE <span class="m">802</span>.1ab)

<span class="c"># The BusyBox ntpd does not use syslog when running in the foreground</span>
<span class="c"># So we use this trick to redirect stdout/stderr to a log file.  The</span>
<span class="c"># log file is rotated with the above settings.  The condition declares</span>
<span class="c"># a dependency on a system default route (gateway) to be set.  A single</span>
<span class="c"># &lt;!&gt; at the beginning means ntpd does not respect SIGHUP for restart.</span>
<span class="nb">service</span> [2345] log:/var/log/ntpd.log &lt;!net/route/default&gt; ntpd -n -l -I eth0 -- NTP daemon

<span class="c"># For multiple instances of the same service, add :ID somewhere between</span>
<span class="c"># the service/run/task keyword and the command.</span>
<span class="nb">service</span> :80   [2345] merecat -n -p <span class="m">80</span>   <span class="sx">/var/www</span> -- Web server
<span class="nb">service</span> :8080 [2345] merecat -n -p <span class="m">8080</span> <span class="sx">/var/www</span> -- Old web server

<span class="c"># Alternative method instead of below runparts, can also use /etc/rc.local</span>
<span class="c">#task [S] /etc/init.d/keyboard-setup start       -- Setting up preliminary keymap</span>
<span class="c">#task [S] /etc/init.d/acpid start                -- Starting ACPI Daemon</span>
<span class="c">#task [S] /etc/init.d/kbd start                  -- Preparing console</span>

<span class="c"># Run start scripts from this directory</span>
<span class="c"># runparts /etc/start.d</span>

<span class="c"># Virtual consoles run BusyBox getty, keep kernel default speed</span>
<span class="nb">tty</span> [12345] <span class="sx">/sbin/getty</span> -L <span class="m">0</span> <span class="sx">/dev/tty1</span> linux
<span class="nb">tty</span> [12345] <span class="sx">/sbin/getty</span> -L <span class="m">0</span> <span class="sx">/dev/tty2</span> linux
<span class="nb">tty</span> [12345] <span class="sx">/sbin/getty</span> -L <span class="m">0</span> <span class="sx">/dev/tty3</span> linux

<span class="c"># Use built-in getty for serial port and USB serial</span>
<span class="nb">tty</span> [12345] <span class="sx">/dev/ttyAMA0</span> noclear nowait
<span class="nb">tty</span> [12345] <span class="sx">/dev/ttyUSB0</span> noclear

<span class="c"># Just give me a shell, I need to debug this embedded system!</span>
<span class="nb">tty</span> [12345] @console noclear nologin
</code></pre></div><p>The <code>service</code> stanza, as well as <code>task</code>, <code>run</code> and others are described
in full in <a href="doc/config.md">doc/config.md</a>.  Here&rsquo;s a quick overview of
some of the most common components needed to start a UNIX daemon:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">service [LVLS] &lt;COND&gt; log env:[-]/etc/default/daemon daemon ARGS -- Daemon daemon
^       ^      ^      ^   ^                          ^              ^       ^
|       |      |      |   |                          |              |        `-- Optional description
|       |      |      |   |                          |              `----------- Daemon arguments
|       |      |      |   |                          `-------------------------- Path to daemon
|       |      |      |    `---------------------------------------------------- Optional env. file
|       |      |       `-------------------------------------------------------- Redirect output to log
|       |       `--------------------------------------------------------------- Optional conditions
|        `---------------------------------------------------------------------- Optional Runlevels
 `------------------------------------------------------------------------------ Monitored application
</code></pre></div><p>Some components are optional: runlevel(s), condition(s) and description,
making it easy to create simple start scripts and still possible for more
advanced uses as well:</p>
<pre><code>service sshd -D
</code></pre>
<p>Dependencies are handled using <a href="doc/conditions.md">conditions</a>.  One of
the most common conditions is to wait for basic networking to become
available:</p>
<pre><code>service &lt;net/route/default&gt; nginx -- High performace HTTP server
</code></pre>
<p>Here is another example where we instruct Finit to not start BusyBox
<code>ntpd</code> until <code>syslogd</code> has started properly.  Finit waits for <code>syslogd</code>
to create its PID file, by default <code>/var/run/syslogd.pid</code>.</p>
<pre><code>service [2345] log &lt;!pid/syslogd&gt; ntpd -n -N -p pool.ntp.org
service [S12345] syslogd -n -- Syslog daemon
</code></pre>
<p>Notice the <code>log</code> keyword, BusyBox <code>ntpd</code> uses <code>stderr</code> for logging when
run in the foreground.  With <code>log</code> Finit redirects <code>stdout</code> + <code>stderr</code>
to the system log daemon using the command line <code>logger(1)</code> tool.</p>
<p>A service, or task, can have multiple dependencies listed.  Here we wait
for <em>both</em> <code>syslogd</code> to have started and basic networking to be up:</p>
<pre><code>service [2345] log &lt;pid/syslogd,net/route/default&gt; ntpd -n -N -p pool.ntp.org
</code></pre>
<p>If either condition fails, e.g. loss of networking, <code>ntpd</code> is stopped
and as soon as it comes back up again <code>ntpd</code> is restarted automatically.</p>
<p><strong>Note:</strong> Make sure daemons <em>do not</em> fork and detach themselves from the
controlling TTY, usually an <code>-n</code> or <code>-f</code> flag, or <code>-D</code> as in the case
of OpenSSH above.  If it detaches itself, Finit cannot monitor it and
will instead try to restart it.</p>
<h2 id="features">Features</h2>
<p><strong>Process Supervision</strong></p>
<p>Start, monitor and restart services should they fail.</p>
<p><strong>Getty</strong></p>
<p>Finit supports external getty but also comes with a limited built-in
Getty, useful for really small systems.  A getty sets up the TTY and
waits for user input before handing over to <code>/bin/login</code>, which is
responsible for handling the actual authentication.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">tty [12345] /dev/tty1    nowait  linux
tty [12345] /dev/ttyAMA0 noclear vt100
tty [12345] /sbin/getty  -L /dev/ttyAMA0 vt100
</code></pre></div><p>Users of embedded systems may want to enable automatic serial console
with the special <code>@console</code> device.  This works regardless weather the
system uses <code>ttyS0</code>, <code>ttyAMA0</code>, <code>ttyMXC0</code>, or anything else.  Finit
figures it out by querying sysfs: <code>/sys/class/tty/console/active</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">tty [12345] @console linux noclear
</code></pre></div><p>Notice the optional <code>noclear</code>, <code>nowait</code>, and <code>nologin</code> flags.  The
latter is for skipping the login process entirely. For more information,
see <a href="doc/config.md#syntax">doc/config.md</a>.</p>
<p><strong>Runlevels</strong></p>
<p>Support for SysV init-style <a href="http://helllabs.org/finit/">runlevels</a> is available, in the same
minimal style as everything else in Finit.  The <code>[2345]</code> syntax can be
applied to service, task, run, and TTY stanzas.</p>
<p>Reserved runlevels are 0 and 6, halt and reboot, respectively just like
SysV init.  Runlevel 1 can be configured freely, but is recommended to
be kept as the system single-user runlevel since Finit will not start
networking here.  The configured <code>runlevel NUM</code> from <code>/etc/finit.conf</code>
is what Finit changes to after bootstrap, unless &lsquo;single&rsquo; (or &lsquo;S&rsquo;) is
given on the kernel cmdline, in which case runlevel 1 is started.</p>
<p>All services in runlevel S(0) are started first, followed by the desired
run-time runlevel.  Run tasks in runlevel S can be started in sequence
by using <code>run [S] cmd</code>.  Changing runlevels at runtime is done like any
other init, e.g. <!-- raw HTML omitted -->init 4<!-- raw HTML omitted -->, but also using the more advanced
<code>intictl</code> tool.</p>
<p><strong>Plugins</strong></p>
<p>Plugins can <em>extend</em> the functionality of Finit and <em>hook into</em> the
different stages of the boot process and at runtime.  Plugins are
written in C and compiled into a dynamic library loaded automatically by
finit at boot.  A basic set of plugins are bundled in the <code>plugins/</code>
directory.</p>
<p>Capabilities:</p>
<ul>
<li><strong>Hooks</strong><br>
Hook into the boot at predefined points to extend Finit</li>
<li><strong>I/O</strong><br>
Listen to external events and control Finit behavior/services</li>
</ul>
<p>Extensions and functionality not purely related to what an <code>/sbin/init</code>
needs to start a system are available as a set of plugins that either
hook into the boot process or respond to various I/O.</p>
<p>For more information, see <a href="doc/plugins.md">doc/plugins.md</a>.</p>
<p><strong>Automatic Reload</strong></p>
<p>By default, Finit monitors <code>/etc/finit.d/</code> and <code>/etc/finit.d/enabled/</code>
registering any changes to <code>.conf</code> files.  To activate a change the user
must call <code>initctl reload</code>, which reloads all modified files, stops any
removed services, starts new ones, and restarts any modified ones, with
SIGHUP if the process supports it.</p>
<p>For some use-cases the extra step of calling <code>initctl reload</code> creates an
unnecessary overhead, which can be removed at build-time using:</p>
<pre><code>configure --enable-auto-reload
</code></pre>
<h2 id="runparts--etcrclocal">Runparts &amp; /etc/rc.local</h2>
<p>At the end of the boot, when all bootstrap (<code>S</code>) tasks and services have
started, but not networking, Finit calls its built-in [run-parts(8)][]
command on any configured <code>runparts &lt;DIR&gt;</code> directory.  This happens just
before changing to the configured runlevel (default 2).  (Networking is
enabled just prior to changing from single user mode.)</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">runparts /etc/rc.d/
</code></pre></div><p>Right after the runlevel change when all services have started properly,
<code>/etc/rc.local</code> is called.</p>
<p>No configuration stanza in <code>/etc/finit.conf</code> is required for <code>rc.local</code>.
If it exists and is an executable shell script Finit calls it at the very
end of the boot, before calling the <code>HOOK_SYSTEM_UP</code>.  See more on hooks
in <a href="doc/plugins.md#hooks">doc/plugins.md</a>, and about the system bootstrap
in <a href="doc/bootstrap.md">doc/bootstrap.md</a>.</p>
<h2 id="runlevels">Runlevels</h2>
<p>Basic support for <a href="http://helllabs.org/finit/">runlevels</a> is included in Finit from v1.8.  By
default all services, tasks, run commands and TTYs listed without a set
of runlevels get a default set <code>[234]</code> assigned.  The default runlevel
after boot is 2.</p>
<p>Finit supports runlevels 0-9, and S, with 0 reserved for halt, 6 reboot
and S for services to only run at bootstrap.  Runlevel 1 is the single
user level, where usually no networking is enabled.  In Finit this is
more of a policy for the user to define.  Normally only runlevels 1-6
are used, and even more commonly, only the default runlevel is used.</p>
<p>To specify an allowed set of runlevels for a <code>service</code>, <code>run</code> command,
<code>task</code>, or <code>tty</code>, add <code>[NNN]</code> to your <code>/etc/finit.conf</code>, like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">service [S12345] syslogd -n -x             -- System log daemon
run     [S]      /etc/init.d/acpid start   -- Starting ACPI Daemon
task    [S]      /etc/init.d/kbd start     -- Preparing console
service [S12345] &lt;pid/syslogd&gt; klogd -n -x -- Kernel log daemon

tty     [12345]  /dev/tty1
tty     [2]      /dev/tty2
tty     [2]      /dev/tty3
tty     [2]      /dev/tty4
tty     [2]      /dev/tty5
tty     [2]      /dev/tty6
</code></pre></div><p>In this example syslogd is first started, in parallel, and then acpid is
called using a conventional SysV init script.  It is called with the run
command, meaning the following task command to start the kbd script is
not called until the acpid init script has fully completed.  Then the
keyboard setup script is called in parallel with klogd as a monitored
service.</p>
<p>Again, tasks and services are started in parallel, while run commands
are called in the order listed and subsequent commands are not started
until a run command has completed.  Also, task and run commands are run
in a shell, so pipes and redirects can be used.</p>
<p>The following examples illustrate this.  Bootstrap task and run commands
are also removed when they have completed, <code>initctl show</code> will not list
them.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">task [S] echo &#34;foo&#34; | cat &gt;/tmp/bar
run  [S] echo &#34;$HOME&#34; &gt;/tmp/secret
</code></pre></div><p>Switching between runlevels can be done by calling init with a single
argument, e.g. <!-- raw HTML omitted -->init 5<!-- raw HTML omitted -->, or using <code>initctl runlevel 5</code>, both
switch to runlevel 5.  When changing runlevels Finit also automatically
reloads all <code>.conf</code> files in the <code>/etc/finit.d/</code> directory.  So if you
want to set a new system config, switch to runlevel 1, change all config
files in the system, and touch all <code>.conf</code> files in <code>/etc/finit.d</code>
before switching back to the previous runlevel again — that way Finit
can both stop old services and start any new ones for you, without
rebooting the system.</p>
<h2 id="rebooting--halting">Rebooting &amp; Halting</h2>
<p>Traditionally, rebooting and halting a UNIX system is done by changing
its runlevel.  Finit comes with its own tooling providing: <code>shutdown</code>,
<code>reboot</code>, <code>poweroff</code>, and <code>suspend</code>, but also the <code>initctl</code> tool,
detailed in the next section.</p>
<p>For compatibility reasons Finit listens to the same set of signals as
BusyBox init.  This is not 100% compatible with SysV init, but clearly
the more common combination for Finit.  For more details, see
<a href="doc/signals.md">doc/signals.md</a>.</p>
<h2 id="commands--status">Commands &amp; Status</h2>
<p>Finit also implements a modern API to query status, and start/stop
services, called <code>initctl</code>.  Unlike <code>telinit</code> the <code>initctl</code> tool does
not return until the given command has fully completed.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">alpine:~# initctl help
Usage: initctl [OPTIONS] [COMMAND]

Options:
  -b, --batch               Batch mode, no screen size probing
  -c, --create              Create missing paths (and files) as needed
  -f, --force               Ignore missing files and arguments, never prompt
  -t, --no-heading          Skip table headings
  -v, --verbose             Verbose output
  -h, --help                This help text

Commands:
  debug                     Toggle Finit (daemon) debug
  help                      This help text
  version                   Show Finit version

  ls | list                 List all .conf in /etc/finit.d
  create   &lt;CONF&gt;           Create   .conf in /etc/finit.d/available
  delete   &lt;CONF&gt;           Delete   .conf in /etc/finit.d/available
  show     &lt;CONF&gt;           Show     .conf in /etc/finit.d/available
  edit     &lt;CONF&gt;           Edit     .conf in /etc/finit.d/available
  touch    &lt;CONF&gt;           Change   .conf in /etc/finit.d/available
  enable   &lt;CONF&gt;           Enable   .conf in /etc/finit.d/available
  disable  &lt;CONF&gt;           Disable  .conf in /etc/finit.d/enabled
  reload                    Reload  *.conf in /etc/finit.d (activate changes)

  cond     show             Show condition status
  cond     dump             Dump all conditions and their status

  log      [NAME]           Show ten last Finit, or NAME, messages from syslog
  start    &lt;NAME&gt;[:ID]      Start service by name, with optional ID
  stop     &lt;NAME&gt;[:ID]      Stop/Pause a running service by name
  restart  &lt;NAME&gt;[:ID]      Restart (stop/start) service by name
  status   &lt;NAME&gt;[:ID]      Show service status, by name
  status                    Show status of services, default command

  ps                        List processes based on cgroups

  runlevel [0-9]            Show or set runlevel: 0 halt, 6 reboot
  reboot                    Reboot system
  halt                      Halt system
  poweroff                  Halt and power off system
  suspend                   Suspend system
</code></pre></div><p>For services <em>not</em> supporting <code>SIGHUP</code> the <code>&lt;!&gt;</code> notation in the .conf
file must be used to tell Finit to stop and start it on <code>reload</code> and
<code>runlevel</code> changes.  If <code>&lt;&gt;</code> holds more <a href="doc/conditions.md">conditions</a>,
these will also affect how a service is maintained.</p>
<p><strong>Note:</strong> even though it is possible to start services not belonging in
the current runlevel these services will not be respawned automatically
by Finit if they exit (crash).  Hence, if the runlevel is 2, the below
Dropbear SSH service will not be restarted if it is killed or exits.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">alpine:~# initctl 
PID   IDENT     STATUS   RUNLEVELS    DESCRIPTION
======================================================================
1506  acpid     running  [--2345----] ACPI daemon
1509  crond     running  [--2345----] Cron daemon
1489  dropbear  running  [--2345----] Dropbear SSH daemon
1511  klogd     running  [S12345----] Kernel log daemon
1512  ntpd      running  [--2345----] NTP daemon
1473  syslogd   running  [S12345----] Syslog daemon

alpine:~# initctl -v
PID   IDENT     STATUS   RUNLEVELS    COMMAND
======================================================================
1506  acpid     running  [--2345----] acpid -f
1509  crond     running  [--2345----] crond -f -S $CRON_OPTS
1489  dropbear  running  [--2345----] dropbear -R -F $DROPBEAR_OPTS
1511  klogd     running  [S12345----] klogd -n $KLOGD_OPTS
1512  ntpd      running  [--2345----] ntpd -n $NTPD_OPTS
1473  syslogd   running  [S12345----] syslogd -n
</code></pre></div><p>The environment variables to each of the services above are read from,
in the case of Alpine Linux, <code>/etc/conf.d/</code>.  Other distributions may
have other directories, e.g., Debian use <code>/etc/default/</code>.</p>
<h2 id="requirements">Requirements</h2>
<p>Finit is capable of running on both desktop/server systems with udev and
embedded systems that usually come with BusyBox mdev.  Some systems have
systemd-udev or eudev today instead of the original udev, Finit probes
for all of them at runtime and expects <code>/dev/</code> to be a writable file
system using <code>devtmpfs</code>.  It is also possible to run on a statically set
up <code>/dev</code> if needed.  It is however not a good idea to have both udev
and mdev installed at the same time, this will lead to unpredictable
results.</p>
<p>At boot Finit calls either <code>mdev</code> or <code>udevd</code> to populate <code>/dev</code>, this is
done slightly differently and on systems with udev you might want to add
the following one-shot task early in your <code>/etc/finit.conf</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">run [S] udevadm settle --timeout=120 -- Waiting for udev
</code></pre></div><p>Finit has a built-in Getty for TTYs, but requires a working <code>/bin/login</code>
or <code>/bin/sh</code>, if no TTYs are configured in <code>/etc/finit.conf</code>.</p>
<p>For a fully operational system <code>/var</code>, <code>/run</code> and <code>/tmp</code> must be set up
properly in <code>/etc/fstab</code> &ndash; which is iterated over at boot.</p>
<h2 id="origin">Origin</h2>
<p>This project is the continuation of the <a href="http://helllabs.org/finit/">original finit</a> by Claudio
Matsuoka, which was reverse engineered from syscalls of the
<a href="http://wiki.eeeuser.com/boot_process:the_boot_process">EeePC fastinit</a> daemon.</p>
<p>Please file bug reports, clone it, or send pull requests for bug fixes
and proposed extensions using GitHub:</p>
<ul>
<li><a href="https://github.com/troglobit/finit">Repository</a></li>
<li><a href="https://github.com/troglobit/finit/issues">Issue Tracker</a></li>
<li><a href="https://github.com/troglobit/finit/blob/master/README.md">README</a></li>
<li><a href="https://github.com/troglobit/finit/blob/master/TODO.md">TODO</a></li>
<li><a href="https://github.com/troglobit/finit/blob/master/ChangeLog.md">ChangeLog</a></li>
<li><a href="ftp://ftp.troglobit.com/finit/finit-4.0-rc2.tar.gz">finit-4.0-rc2.tar.gz</a>,
<a href="ftp://ftp.troglobit.com/finit/finit-4.0-rc2.tar.gz.md5">MD5</a></li>
</ul>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
            
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2021</span>
            <span><a href="https://troglobit.com/">Joachim Wiberg</a></span>
            <span>UNIX&trade; 4Life! &#9994;</span><span><a href="https://troglobit.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Proudly hosted by Fosshost</span>
            <span><a href="https://fosshost.org/">https://fosshost.org/</a></span>
          </div>
    </div>
</footer>

            
        </div>

        



<script type="text/javascript" src="https://troglobit.com/bundle.min.af435e44374f1e99a669ea8cd5bb9a2fceed80588941a451bfddb66b86a67c9f40b0f417e9543a763f809aa7e9300d7b1d69bf99615810ba02ac70396d50fad5.js" integrity="sha512-r0NeRDdPHpmmaeqM1buaL87tgFiJQaRRv922a4amfJ9AsPQX6VQ6dj&#43;AmqfpMA17HWm/mWFYELoCrHA5bVD61Q=="></script>



    </body>
</html>
