<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Joachim Wiberg">
    <meta name="description" content="Recently I needed a simple TCP/UDP port redirector and stumbled upon
this Stackoverflow post.  As usual I wasn&rsquo;t first wanting to this
without using iptables.
There were several alternatives, but since my target was embedded with
limited amount of RAM and flash I wanted something really small.  So the
best fit turned out to be redir, which unfortunately only could
handle TCP connections.  This is what led me to write uredir to
complement redir.  Eventually I ended up adoptiing redir as well,
which meant giving it a bit of a facelift and to give them both the same
look and feel.
Currently they are two separate applications, which in some use-cases
can be beneficial (small size), but I may in the future transplant the
UDP functionality of uredir into redir.  We&rsquo;ll see, right now though
I have several other projects to attend to :-)">
    <meta name="keywords" content="blog,developer,personal">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Redirecting Ports For Fun and Profit"/>
<meta name="twitter:description" content="Recently I needed a simple TCP/UDP port redirector and stumbled upon
this Stackoverflow post.  As usual I wasn&rsquo;t first wanting to this
without using iptables.
There were several alternatives, but since my target was embedded with
limited amount of RAM and flash I wanted something really small.  So the
best fit turned out to be redir, which unfortunately only could
handle TCP connections.  This is what led me to write uredir to
complement redir.  Eventually I ended up adoptiing redir as well,
which meant giving it a bit of a facelift and to give them both the same
look and feel.
Currently they are two separate applications, which in some use-cases
can be beneficial (small size), but I may in the future transplant the
UDP functionality of uredir into redir.  We&rsquo;ll see, right now though
I have several other projects to attend to :-)"/>

    <meta property="og:title" content="Redirecting Ports For Fun and Profit" />
<meta property="og:description" content="Recently I needed a simple TCP/UDP port redirector and stumbled upon
this Stackoverflow post.  As usual I wasn&rsquo;t first wanting to this
without using iptables.
There were several alternatives, but since my target was embedded with
limited amount of RAM and flash I wanted something really small.  So the
best fit turned out to be redir, which unfortunately only could
handle TCP connections.  This is what led me to write uredir to
complement redir.  Eventually I ended up adoptiing redir as well,
which meant giving it a bit of a facelift and to give them both the same
look and feel.
Currently they are two separate applications, which in some use-cases
can be beneficial (small size), but I may in the future transplant the
UDP functionality of uredir into redir.  We&rsquo;ll see, right now though
I have several other projects to attend to :-)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://troglobit.com/2016/07/02/redirecting-tcp-udp-ports-for-fun-and-profit/" />
<meta property="article:published_time" content="2016-07-02T12:54:37+00:00" />
<meta property="article:modified_time" content="2016-07-02T12:54:37+00:00" />


    <title>
  Redirecting Ports For Fun and Profit · The Last Outpost
</title>

    
      <link rel="canonical" href="https://troglobit.com/2016/07/02/redirecting-tcp-udp-ports-for-fun-and-profit/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css" integrity="sha256-gsmEoJAws/Kd3CjuOQzLie5Q3yshhvmo7YNtBG7aaEY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://troglobit.com/css/coder.min.9836c03fe5c87d102278a33e86d0591ef36c89b1e17e8e547ebf84c05cee010e.css" integrity="sha256-mDbAP&#43;XIfRAieKM&#43;htBZHvNsibHhfo5Ufr&#43;EwFzuAQ4=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="https://troglobit.com/css/coder-dark.min.717236c74e0a5208ef73964a9f44c6b443b689a95b270d8b2a40d0c012460dac.css" integrity="sha256-cXI2x04KUgjvc5ZKn0TGtEO2ialbJw2LKkDQwBJGDaw=" crossorigin="anonymous" media="screen" />
      
    

    

    

    <link rel="icon" type="image/png" href="https://troglobit.com/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://troglobit.com/favicon.ico" sizes="16x16">

    <link rel="apple-touch-icon" href="https://troglobit.com/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://troglobit.com/images/apple-touch-icon.png">

    

    <meta name="generator" content="Hugo 0.68.3" />
  </head>

  
  
    
  
  <body class="colorscheme-auto"
        onload=""
  >
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://troglobit.com/">
      The Last Outpost
    </a>
    
      
        <span id="dark-mode-toggle" class="float-right">
          <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
        </span>
      
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://troglobit.com/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://troglobit.com/post/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://troglobit.com/howto/">HowTos</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://troglobit.com/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://resume.troglobit.com">Resumé</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://ftp.troglobit.com">FTP</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://git.troglobit.com">GIT</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://deb.troglobit.com">DEB</a>
            </li>
          
        
        
        
          <li class="navigation-item separator">
            <span>|</span>
          </li>
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Redirecting Ports For Fun and Profit</h1>
    </header>

    <p>Recently I needed a simple TCP/UDP port redirector and stumbled upon
<a href="https://serverfault.com/questions/252150/port-forwarding-on-linux-without-iptables/">this Stackoverflow post</a>.  As usual I wasn&rsquo;t first wanting to this
without using <code>iptables</code>.</p>
<p>There were several alternatives, but since my target was embedded with
limited amount of RAM and flash I wanted something really small.  So the
best fit turned out to be <a href="https://github.com/troglobit/redir">redir</a>, which unfortunately only could
handle TCP connections.  This is what led me to write <a href="https://github.com/troglobit/uredir">uredir</a> to
complement <code>redir</code>.  Eventually I ended up adoptiing <code>redir</code> as well,
which meant giving it a bit of a facelift and to give them both the same
look and feel.</p>
<p>Currently they are two separate applications, which in some use-cases
can be beneficial (small size), but I may in the future transplant the
UDP functionality of <code>uredir</code> into <code>redir</code>.  We&rsquo;ll see, right now though
I have several other <a href="https://troglobit.com/projects/">projects</a> to attend to :-)</p>
<h2 id="examples">Examples</h2>
<p>To redirect port 80 to a webserver listening on loopback port 8080,
remember to use sudo when using priviliged ports:</p>
<pre><code>sudo redir :80 127.0.0.1:8080
</code></pre>
<p>To run redir from a process monitor like <a href="https://github.com/troglobit/finit">Finit</a> or systemd, tell it
to not background itself and to only use the syslog for log messages:</p>
<pre><code>redir -n -s :80 127.0.0.1:8080
</code></pre>
<p>An <code>/etc/inetd.conf</code> line of the same looks very similar:</p>
<pre><code>http  stream  tcp  nowait  root  /usr/sbin/tcpd /usr/bin/redir -n -s -i 127.0.0.1:8080
</code></pre>
<p>When running multiple instances it can be useful to change how they
identify themselves.  The following starts an NNTP and a POP3 port
redirector, named accordingly.</p>
<pre><code>redir -I nntp www:119 netgate:119
redir -I pop3 ftp:110 netgate:110
</code></pre>
<p><code>uredir</code> works much in the same way, but also has a few UDP specific
features from the early days of the Internet:</p>
<pre><code>uredir 0.0.0.0:53 192.168.0.1:53
uredir 0.0.0.0:7                   # Echo mode
</code></pre>
<p>An <code>/etc/inetd.conf</code> example:</p>
<pre><code>snmp    dgram   udp wait    root    /usr/sbin/tcpd /usr/bin/uredir -i 127.0.0.1:16161
</code></pre>
<p>See the <code>README</code> and man pages for each of the two commands for more
information.  Enjoy!</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
  </article>
</section>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js" id="MathJax-script"></script>
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ['$', '$'], ['\\(', '\\)']
        ],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>

      </div>

      
  <footer class="footer">
    <section class="container">
      
      
        ©
        
        2020
         Joachim Wiberg 
      
      
      
    </section>
  </footer>

    </main>

    
      
      <script src="https://troglobit.com/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js"></script>
    

    

    

    

    

    
  </body>

</html>
