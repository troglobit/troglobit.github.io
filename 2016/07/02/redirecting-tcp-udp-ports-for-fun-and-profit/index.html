<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Joachim Wiberg ">
<meta name="description" content="Recently I needed a simple TCP/UDP port redirector and stumbled upon this Stackoverflow post. As usual I wasn&amp;rsquo;t first wanting to this without using iptables.
There were several alternatives, but since my target was embedded with limited amount of RAM and flash I wanted something really small. So the best fit turned out to be redir, which unfortunately only could handle TCP connections. This is what led me to write uredir to complement redir. Eventually I ended up adoptiing redir as well, which meant giving it a bit of a facelift and to give them both the same look and feel.
Currently they are two separate applications, which in some use-cases can be beneficial (small size), but I may in the future transplant the UDP functionality of uredir into redir. We&amp;rsquo;ll see, right now though I have several other projects to attend to :-)
" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://troglobit.com/2016/07/02/redirecting-tcp-udp-ports-for-fun-and-profit/" />


    <title>
        
            Redirecting Ports For Fun and Profit :: Joachim Wiberg 
        
    </title>





<link rel="stylesheet" href="https://troglobit.com/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css" integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE=">



    <link rel="apple-touch-icon" sizes="180x180" href="https://troglobit.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://troglobit.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://troglobit.com/favicon-16x16.png">
    <link rel="manifest" href="https://troglobit.com/site.webmanifest">
    <link rel="mask-icon" href="https://troglobit.com/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="https://troglobit.com/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="Redirecting Ports For Fun and Profit">
<meta itemprop="description" content="Recently I needed a simple TCP/UDP port redirector and stumbled upon
this Stackoverflow post.  As usual I wasn&rsquo;t first wanting to this
without using iptables.
There were several alternatives, but since my target was embedded with
limited amount of RAM and flash I wanted something really small.  So the
best fit turned out to be redir, which unfortunately only could
handle TCP connections.  This is what led me to write uredir to
complement redir.  Eventually I ended up adoptiing redir as well,
which meant giving it a bit of a facelift and to give them both the same
look and feel.
Currently they are two separate applications, which in some use-cases
can be beneficial (small size), but I may in the future transplant the
UDP functionality of uredir into redir.  We&rsquo;ll see, right now though
I have several other projects to attend to :-)"><meta itemprop="datePublished" content="2016-07-02T12:54:37+00:00" />
<meta itemprop="dateModified" content="2016-07-02T12:54:37+00:00" />
<meta itemprop="wordCount" content="314">
<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Redirecting Ports For Fun and Profit"/>
<meta name="twitter:description" content="Recently I needed a simple TCP/UDP port redirector and stumbled upon
this Stackoverflow post.  As usual I wasn&rsquo;t first wanting to this
without using iptables.
There were several alternatives, but since my target was embedded with
limited amount of RAM and flash I wanted something really small.  So the
best fit turned out to be redir, which unfortunately only could
handle TCP connections.  This is what led me to write uredir to
complement redir.  Eventually I ended up adoptiing redir as well,
which meant giving it a bit of a facelift and to give them both the same
look and feel.
Currently they are two separate applications, which in some use-cases
can be beneficial (small size), but I may in the future transplant the
UDP functionality of uredir into redir.  We&rsquo;ll see, right now though
I have several other projects to attend to :-)"/>



    <meta property="og:title" content="Redirecting Ports For Fun and Profit" />
<meta property="og:description" content="Recently I needed a simple TCP/UDP port redirector and stumbled upon
this Stackoverflow post.  As usual I wasn&rsquo;t first wanting to this
without using iptables.
There were several alternatives, but since my target was embedded with
limited amount of RAM and flash I wanted something really small.  So the
best fit turned out to be redir, which unfortunately only could
handle TCP connections.  This is what led me to write uredir to
complement redir.  Eventually I ended up adoptiing redir as well,
which meant giving it a bit of a facelift and to give them both the same
look and feel.
Currently they are two separate applications, which in some use-cases
can be beneficial (small size), but I may in the future transplant the
UDP functionality of uredir into redir.  We&rsquo;ll see, right now though
I have several other projects to attend to :-)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://troglobit.com/2016/07/02/redirecting-tcp-udp-ports-for-fun-and-profit/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-07-02T12:54:37+00:00" />
<meta property="article:modified_time" content="2016-07-02T12:54:37+00:00" />





    <meta property="article:section" content="UNIX" />



    <meta property="article:published_time" content="2016-07-02 12:54:37 &#43;0000 UTC" />











    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://troglobit.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">&gt;</span>
            <span class="logo__text ">
                $ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://troglobit.com/about/">About</a></li><li><a href="https://troglobit.com/posts/">Blog</a></li><li><a href="https://troglobit.com/howtos/">HowTos</a></li><li><a href="https://troglobit.com/projects/">Projects</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        2 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://troglobit.com/2016/07/02/redirecting-tcp-udp-ports-for-fun-and-profit/">Redirecting Ports For Fun and Profit</a>
      </h1>

      

      

      

      <div class="post-content">
        <p>Recently I needed a simple TCP/UDP port redirector and stumbled upon
<a href="https://serverfault.com/questions/252150/port-forwarding-on-linux-without-iptables/">this Stackoverflow post</a>.  As usual I wasn&rsquo;t first wanting to this
without using <code>iptables</code>.</p>
<p>There were several alternatives, but since my target was embedded with
limited amount of RAM and flash I wanted something really small.  So the
best fit turned out to be <a href="https://github.com/troglobit/redir">redir</a>, which unfortunately only could
handle TCP connections.  This is what led me to write <a href="https://github.com/troglobit/uredir">uredir</a> to
complement <code>redir</code>.  Eventually I ended up adoptiing <code>redir</code> as well,
which meant giving it a bit of a facelift and to give them both the same
look and feel.</p>
<p>Currently they are two separate applications, which in some use-cases
can be beneficial (small size), but I may in the future transplant the
UDP functionality of <code>uredir</code> into <code>redir</code>.  We&rsquo;ll see, right now though
I have several other <a href="https://troglobit.com/projects/">projects</a> to attend to :-)</p>
<h2 id="examples">Examples</h2>
<p>To redirect port 80 to a webserver listening on loopback port 8080,
remember to use sudo when using priviliged ports:</p>
<pre><code>sudo redir :80 127.0.0.1:8080
</code></pre>
<p>To run redir from a process monitor like <a href="https://github.com/troglobit/finit">Finit</a> or systemd, tell it
to not background itself and to only use the syslog for log messages:</p>
<pre><code>redir -n -s :80 127.0.0.1:8080
</code></pre>
<p>An <code>/etc/inetd.conf</code> line of the same looks very similar:</p>
<pre><code>http  stream  tcp  nowait  root  /usr/sbin/tcpd /usr/bin/redir -n -s -i 127.0.0.1:8080
</code></pre>
<p>When running multiple instances it can be useful to change how they
identify themselves.  The following starts an NNTP and a POP3 port
redirector, named accordingly.</p>
<pre><code>redir -I nntp www:119 netgate:119
redir -I pop3 ftp:110 netgate:110
</code></pre>
<p><code>uredir</code> works much in the same way, but also has a few UDP specific
features from the early days of the Internet:</p>
<pre><code>uredir 0.0.0.0:53 192.168.0.1:53
uredir 0.0.0.0:7                   # Echo mode
</code></pre>
<p>An <code>/etc/inetd.conf</code> example:</p>
<pre><code>snmp    dgram   udp wait    root    /usr/sbin/tcpd /usr/bin/uredir -i 127.0.0.1:16161
</code></pre>
<p>See the <code>README</code> and man pages for each of the two commands for more
information.  Enjoy!</p>
<!--
  -- Local Variables:
  -- mode: markdown
  -- End:
  -->
      </div>
    </article>

    <hr />

    <div class="post-info">
      
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>

        <span class="tag"><a href="https://troglobit.com/categories/unix/">UNIX</a></span>
        
    </p>


      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        314 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2016-07-02 14:54
        

         
          
        
      </p>
    </div>

    
    <div class="pagination">
        

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://troglobit.com/2016/07/03/upgrade-x1-carbon-bios-from-linux/">
                    <span class="button__icon">←</span>
                    <span class="button__text">Upgrade X1 Carbon BIOS from Linux</span>
                </a>
            </span>
            

            
            <span class="button next">
                <a href="https://troglobit.com/2016/04/21/using-netcat-to-test-your-internet-daemon/">
                    <span class="button__text">Using netcat to test your Internet daemon</span>
                    <span class="button__icon">→</span>
                </a>
            </span>
            
        </div>
    </div>


    

    

    

  </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2006</span>
            <span><a href="https://troglobit.com/">Joachim Wiberg</a></span>
            <span>UNIX&trade; 4Life! &#9994;</span>
            
            
        </div>
    </div>
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="https://troglobit.com/bundle.min.46e438bd2eca7eb6358c700b40f6f56b22ab0b92503ecc11a2d8e4bcc610b8b4da83e5ea3d3e84fdb5f3c3c765744b9f5bbaf43cf5a027910be07ee39a9c12a1.js" integrity="sha512-RuQ4vS7KfrY1jHALQPb1ayKrC5JQPswRotjkvMYQuLTag&#43;XqPT6E/bXzw8dldEufW7r0PPWgJ5EL4H7jmpwSoQ=="></script>




    </body>
</html>
