
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Troglobit</title>
  <meta name="author" content="Joachim Nilsson">

  
  <meta name="description" content="Don't try this at home kids. (Disclaimer: I live in Sweden :) ">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://troglobit.github.io/posts/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Troglobit" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/favicon.png" rel="icon">
<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Troglobit</a></h1>
  
    <h2>Help me Obi-Wan Troglobi, you&#8217;re my only hope!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="troglobit.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="http://resume.troglobit.com">Resume</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://git.troglobit.com">GIT</a></li>
  <li><a href="/finit.html">Finit</a></li>
  <li><a href="/inadyn.html">Inadyn</a></li>
  <li><a href="/smcroute.html">SMCRoute</a></li>
  <li><a href="/mrouted.html">mrouted</a></li>
  <li><a href="/pimd.html">pimd</a></li>
  <li><a href="/uftpd.html">uftpd</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/09/on-the-linearity-of-time/">On the Linearity of Time</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-09T04:25:00+02:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:25 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Don&#8217;t try this at home kids. (Disclaimer: I live in Sweden :)</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/08/09/on-the-linearity-of-time/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/06/event-handling/">Threads vs Events</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-06T14:20:00+02:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:20 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a rant about something I recently found to be a long standing
battle line in the world of programming,
<a href="http://cgi.di.uoa.gr/~mema/courses/mde518/papers/lauer78.pdf">Lau78</a>.
The event vs thread based approach to programming.  As rants go I do
not aspire to deliver a clear or logical message, what so ever.  It&#8217;s
basically just something I need to get off my chest.</p>

<p>It was not until 2007 I first learned about the event based approach
to programming and event libraries like
<a href="http://libevent.org/">libevent</a> and
<a href="http://software.schmorp.de/pkg/libev.html">libev</a>.  Up until that
point the silver bullet everyone was using was &#8230; Threads.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/08/06/event-handling/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/12/new-open-source-releases/">New Open Source Releases</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-12T16:30:00+02:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:30 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Vacation time means catching up on my Open Source projects! :)</p>

<p>Currently I&#8217;m shaping up the home pages and this blog to improve the
easy access and overview of all the packages I maintain.  The
following packages have new releases, or can expect new releases soon:</p>

<ul>
<li> <a href="/editline.html">Minix Editline</a> v1.14.1</li>
<li> <a href="/smcroute.html">SMCRoute</a> v1.99.1 &#8211; There&#8217;s even a v2.0.0 being
 planned, with the core of SMCRoute available as a library</li>
<li> <a href="/mrouted.html">mrouted</a> minor cleanup an sync with
 <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/usr.sbin/mrouted/">OpenBSD</a></li>
<li> <a href="/pimd.html">pimd</a> cleanups and bug fixes, needs testing</li>
<li> <a href="/inadyn.html">inadyn</a> is in dire need of a release, but needs more testing and fixes</li>
</ul>


<p>As usual, see my <a href="http://github.com/troglobit">GitHub</a> for the latest
commits if you want to try anything out, file an issue report, or if
you want to contribute.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/10/net-install-centos/">Net Install CentOS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-10T15:01:00+02:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>3:01 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I usually run Debian or Ubuntu on my machines.  However, having
recently found some time to work on my various projects again, I&#8217;ve
now suddenly found myself in need of a CentOS machine.</p>

<p>The <a href="http://www.centos.org/">CentOS home page</a> invited me to download
an installation ISO, so I went for the small
<a href="http://ftp.funet.fi/pub/mirrors/centos.org/5.9/isos/x86_64/CentOS-5.9-x86_64-netinstall.iso">Net Install</a>
which started perfectly with my virt-manager in Ubuntu.</p>

<p>All I had to provide was an FTP server and directory:</p>

<ul>
<li>mirrors.kernel.org</li>
<li>/centos/5.9/os/x86_64</li>
<li>Anonymous FTP</li>
</ul>


<p>That&#8217;s it, the graphical installer started and I had to start
selecting various packages. Must say it&#8217;s a bit confusing since the
package naming is not the same in RedHat/CentOS as in Debian.</p>

<p>Oh, and if the installations seems to have gotten stuck, just wait it
out.  It&#8217;ll get there :)</p>

<p>Read the following to get
<a href="http://prefetch.net/blog/index.php/2009/06/17/redirecting-the-centos-and-fedora-linux-console-to-a-serial-port-virsh-console-edition/">console in virsh working with CentOS guest</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/05/file-system-pass-through-in-kvm-slash-qemu-slash-libvirt/">File System Pass-Through in KVM/Qemu/libvirt</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-05T23:56:00+02:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:56 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post doesn&#8217;t cover fully setting up KVM/Qemu with virt-manager
and creating virtual machine guests.  See the Ubuntu
<a href="https://help.ubuntu.com/community/KVM/Installation">KVM Installtion</a>,
<a href="https://help.ubuntu.com/community/KVM/VirtManager">VirtManager Guide</a>,
the
<a href="https://help.ubuntu.com/13.04/serverguide/libvirt.html">Ubuntu Server Guide on libvirt</a>,
or
<a href="http://www.howtoforge.com/virtualization-with-kvm-on-ubuntu-12.04-lts-p3">HowtoForge</a>
for that.</p>

<p>Instead this blog post details the most relevant steps to get file
system pass-through between a Linux host and Qemu guest working.  The
upstream <a href="http://wiki.qemu.org/Documentation/9psetup">Qemu docs</a>
provide a good starting point, as is the original
<a href="https://www.kernel.org/doc/ols/2010/ols2010-pages-109-120.pdf">IBM paper on VirtFS</a>.
For users of Ubuntu &lt;= 13.04, watch out for the
<a href="https://bugs.launchpad.net/ubuntu/+source/libvirt/+bug/943680">libvirt bug</a>
that I know many people run into, myself included.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/05/file-system-pass-through-in-kvm-slash-qemu-slash-libvirt/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/22/programming-as-an-artform/">Programming as an Artform</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-22T18:25:00+02:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>6:25 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a response to the excellent post by Jani Gorše, titled
<a href="https://blooki.st/BlookElement/ShowTextPhoto?blookElementId=1962">Why is Programming an Art?</a></p>

<p>Ever since I began studying Computer Engineering at
<a href="http://www.mdh.se">university</a> back in 1995 I have struggled to find
the &#8220;proper&#8221; ways to format my code, name functions and variables
appropriately, structure functions into files and files into
directories with Makefiles and Makefile snippets, using both recursive
and non-recursive make.  Formatting of code, for instance, was for a
while a bit of an obsession of mine, and it sort of is still.  But
today I am more concerned with the overall structure and how
components interact.  Even though I can still get very annoyed at
people naming their local variables obtrusively.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/06/22/programming-as-an-artform/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/08/finit-v1-dot-8/">Finit v1.8</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-08T00:04:00+02:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:04 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&#8217;s been a long time coming, but here it finally is, <a href="/finit.html">Finit</a>
<a href="ftp://troglobit.com/finit/finit-1.8.tar.xz">v1.8</a>!  The goodies we&#8217;ve been waiting for are:</p>

<ul>
<li>Runlevels</li>
<li>Multiple TTYs</li>
<li>One-shot tasks</li>
</ul>


<p>Let&#8217;s start off with tasks.  Tasks are one-shot commands, with a
syntax like service directives, but are not monitored and respawned
like services.  Tasks are started in parallel, just like services.
For some cases, like the system bootstrap phase, some tasks may need
to be executed in sequence, and for that purpose there also exists a
run command.  Run commands are executed in the order listed in
finit.conf and will run until completion before continuing with the
next task or service.</p>

<p>Multiple TTYs is another neat feature.  Similar to services many TTYs
can be started and automatically be respawned when a user logs out.
For embedded targets wanting to save CPU cycles usually one TTY is the
system console.  Use the console command to point to a defined TTY to
activate &#8220;Press any key to activate this console.&#8221;</p>

<p>Finally, runlevels!  This is the key feature in this release of Finit.
Adding the flexibility from SysV init, without the complexity.  This
is one of the key points of Finit &#8211; it should be simple!</p>

<pre><code>finit.conf:
    service [2345] /usr/sbin/sshd -D -- OpenSSH Daemon
</code></pre>

<p>This command tells Finit that the OpenSSH daemon should only run in
runlevel 2-5.  Finit will also respawn sshd if it should crash, just
like before.</p>

<p>Runlevels are needed in use-cases in many embedded devices.  E.g.,
bootstrap, upgrading, and regular operation.  It is completely up to
the system administrator to setup the runlevels of the product or
installation.  At boot runlevel &#8216;S&#8217; runs, well before any networking
is up.  This is used to to one-time probing and setup of the
system. When done the runlevel defined in finit.conf, or the default
2, is started.</p>

<p>See the <a href="https://github.com/troglobit/finit/blob/master/README.md">README</a> for more information, or the code for the full
details.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/07/proof-of-life/">Proof of Life</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-07T22:31:00+02:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:31 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There is a certain &#8220;burstyness&#8221; to the way I work on my open source
projects.  It seems it often coincides with intense work loads during
new release cycles at <a href="http://www.westermo.com">work</a>.</p>

<p>However, I&#8217;ve just finished restoring two pages that got lost in the
big server crash:</p>

<ul>
<li> <a href="/mrouted.shtml">mrouted</a></li>
<li> <a href="/pimd.shtml">pimd</a></li>
</ul>


<p>Big thanks goes to the <a href="http://www.archive.org">Wayback Machine</a> for
maintaining records of the original pages I lost!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/17/resurrection/">Resurrection</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-17T13:37:00+01:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>1:37 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Quite some time has passed now since our old site, http://vmlinux.org,
crashed and burned, and with it much of my previous Open Source work
and blogs.  Tech blog entries, archives for the projects I maintain,
lost.</p>

<p>Backups? Of course not.</p>

<p>This all happened in 2011.  Since then we also managed to lose the
domain and I kind of lost myself for a while, including my motivation.</p>

<p>Fortunately, at this point in time I had migrated most of my projects
from CVS and Subversion to DVCS&#8217; like Bzr and GIT, so I could easily
setup new homes for most of my Open Source projects at
<a href="https://github.com/troglobit">GitHub</a>.</p>

<p>Recently however GitHub stopped serving downloads, so even though I
can continue using it for version control, I had to find a new way of
serving generated tarballs and the like.  See <a href="ftp://troglobit.com">my
FTP</a> for project downloads.</p>

<p>I had also started missing blogging for some reason. So it started to
make sense to roll something on my own again.  Well, here&#8217;s me
starting over.</p>

<p>See you soon with more posts about open source projects, releases of
projects I maintain, Emacs tips, and ramblings about techie stuff I
like!  :-)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/09/announcing-pimd-v2-dot-1-7/">Announcing Pimd v2.1.7</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-01-09T19:20:57+01:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>7:20 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a followup release to the <a href="https://security-tracker.debian.org/tracker/CVE-2011-0007">security fix</a> in <a href="/pimd.html">pimd</a>,
v2.1.6.  The change to use <code>/var/lib/misc/</code>, instead of the insecure
<code>/var/tmp/</code>, has now been refactored into using the proper <a href="http://www.pathname.com/fhs/pub/fhs-2.3.html#VARRUNRUNTIMEVARIABLEDATA">FHS</a>
recommended <code>/var/run/pimd/</code> instead.</p>

<p>As always, check the <a href="/pimd.html">homepage</a>, the <a href="https://github.com/troglobit/pimd/blob/master/ChangeLog">ChangeLog</a> and the
<a href="https://github.com/troglobit/pimd/commits/2.1.7">GIT log</a> for more details.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/5">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/3">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Projects</h1>
  <ul>
    <li><a href="/finit.html">Fast Init Replacement</a></li>
    <li><a href="/inadyn.html">Inadyn DDNS Client</a></li>
    <li><a href="/smcroute.html">SMCRoute Static Multicast Routing</a></li>
    <li><a href="/mrouted.html">The Original Multicast Routing Daemon</a></li>
    <li><a href="/pimd.html">The Original PIM-SM Daemon</a></li>
    <li><a href="/tetris.html">Micro Tetris&trade;</a></li>
    <li><a href="/snake.html">Micro Snake</a></li>
    <li><a href="/editline.html">Minix Editline</a></li>
    <li><a href="/mini-snmpd.html">Mini-SNMPd</a></li>
    <li><a href="/uftpd.html">Micro FTP/TFTP Daemon</a></li>
  </ul>
</section>
<section>
  <h1>HowTos</h1>
  <ul>
    <li><a href="/multicast-howto.html">Multicast</a></li>
    <li><a href="/blog/2014/09/23/howto-add-multicast-routing-support-to-the-freebsd-kernel/">MROUTING support on FreeBSD</a></li>
    <li><a href="/howto-run-pimd-on-openbsd.html">Run pimd on OpenBSD</a></li>
    <li><a href="/howto-run-pimd-on-freebsd.html">Run pimd on FreeBSD</a></li>
    <li><a href="/howto-netbsd-pkgsrc.html">Use NetBSD pre-built packages</a></li>
    <li><a href="/howto-play-with-snmp.html">Play with SNMP</a></li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/14/useful-unix-api-s/">Useful UNIX API:s</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/13/en-vanlig-dag-pa-jobbet-swedish/">En Vanlig Dag På Jobbet (SWEDISH)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/10/awesome-changing-next-slash-prev-tune-in-spotify/">Awesome: Changing Next/Prev Tune in Spotify</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/07/stray-puppies/">Stray Puppies</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/09/summer-of-code-2015/">Summer of Code 2015</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/troglobit">@troglobit</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'troglobit',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Latest Tweets</h1>

  <a class="twitter-timeline" data-dnt="true"
     href="https://twitter.com/troglobit"
     data-widget-id="365667052100415488">Tweets by @troglobit</a>
  <script>!function(d,s,id){var
    js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Joachim Nilsson -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
