
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Troglobit</title>
  <meta name="author" content="Joachim Nilsson">

  
  <meta name="description" content="For the better part of the last ten years I've been working with
multicast in one way or another. I've used many different tools for
testing, but &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://troglobit.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Troglobit" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/favicon.png" rel="icon">
<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Troglobit</a></h1>
  
    <h2>Help me Obi-Wan Troglobi, you&#8217;re my only hope!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="troglobit.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="http://resume.troglobit.com">Resume</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://git.troglobit.com">GIT</a></li>
  <li><a href="/finit.html">Finit</a></li>
  <li><a href="/inadyn.html">Inadyn</a></li>
  <li><a href="/smcroute.html">SMCRoute</a></li>
  <li><a href="/mrouted.html">mrouted</a></li>
  <li><a href="/pimd.html">pimd</a></li>
  <li><a href="/uftpd.html">uftpd</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/03/07/multicast-testing/">Multicast Testing, Made Easy!</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-03-07T01:06:02+01:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>1:06 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For the better part of the last ten years I&#8217;ve been working with
multicast in one way or another.  I&#8217;ve used many different tools for
testing, but usually simply using <code>ping(1)</code> and <code>tcpdump(1)</code> is quite
sufficient.  However, you often need to tell bridges (switches) to open
up multicast in your general direction for your pings to get through, so
you need to send an IGMP &#8220;join&#8221; first.  I found mcjoin, written by David
Stevens, in <a href="https://lkml.org/lkml/2004/8/5/143">this posting to LKML</a>
back in 2006, and started improving it and adding features to it over
the years.</p>

<p>Now, my interest and fascination with multicast only grew with time,
and despite elegant tools like <code>mgen(1)</code> and <code>omping(1)</code> I was never
quite happy.</p>

<p>When releasing SMCRoute v2.1.0 recently, and currently working on the
pimd v2.3.2 release, I was so tired of having to do so many manual steps
just to verify correct operation of a routing daemon.  Therefore I spent
the better part of the weekend fixing up my old mcjoin tool.</p>

<p>I wanted a reliable, simple, and UNIX-y tool to just test things for me.
So I cleaned up the old mcjoin project, first by migrating it from the
toolbox repo, then remove confusing command line options, improve and
simplify the syntax, and then added send/receive capabilities.  Been
meaning to get around to this for ages, and now it seems I had finally
had enough.  So here it is, v2.0:</p>

<ul>
<li><strong>Project</strong>: <a href="https://github.com/troglobit/mcjoin/">https://github.com/troglobit/mcjoin/</a></li>
<li><strong>ChangeLog</strong>: <a href="https://github.com/troglobit/mcjoin/releases/tag/v2.0">https://github.com/troglobit/mcjoin/releases/tag/v2.0</a></li>
</ul>


<p>Most of the time I simply want to see a resulting IGMP join message in
Wireshark, see it bite in a switch&#8217;s FDB or a routing daemon&#8217;s
forwarding table.  So, join is the default operation, and also continues
to be the name of the tool.  My favourite testing group is set as the
default, 225.1.2.3, so you only need to start the tool and you&#8217;re off.
To send to the same default group (225.1.2.3), simply add <code>-s</code> to the
sender side.</p>

<pre><code>sender$ mcjoin -s
^C
sender$

receiver$ mcjoin
joined group 225.1.2.3 on eth0 ...
..................................................................^C
Received total: 66 packets
receiver$
</code></pre>

<p>If you ever need anything else, e.g. routing multicast, there&#8217;s even a
man page.  It mentions setting the TTL and other such nastiness :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/14/useful-unix-api-s/">Useful UNIX API:s</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-11-14T11:45:49+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:45 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Had an interesting conversation with a buddy last night.  It started out
as a shift-reduce problem with Bison and ended up a ping-pong of useful
UNIX API:s.  We concluded that despite having worked professionally with
UNIX for over a decade, it is still very satisfying finding gems like
these.</p>

<p>Most people are completely unaware they exist and end up rolling their
own (buggy) implementations.</p>

<h2>SysV <code>search.h</code></h2>

<p>Mangage a <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/insque.html">simple queue</a>:</p>

<ul>
<li><code>insque()</code></li>
<li><code>remque()</code></li>
</ul>


<p>Manage <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/hcreate.html">hash search table</a>:</p>

<ul>
<li><code>hsearch()</code></li>
<li><code>hcreate()</code></li>
<li><code>hdestroy()</code></li>
</ul>


<p>Manage a <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/tsearch.html">binary search tree</a>:</p>

<ul>
<li><code>tsearch()</code></li>
<li><code>tfind()</code></li>
<li><code>tdelete()</code></li>
<li><code>twalk()</code></li>
<li><code>tdestroy()</code></li>
</ul>


<p><a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/lsearch.html">Linear search</a> and update:</p>

<ul>
<li><code>lfind()</code></li>
<li><code>lsearch()</code></li>
</ul>


<h2>BSD <code>sys/queue.h</code></h2>

<p><a href="https://www.freebsd.org/cgi/man.cgi?query=queue&amp;sektion=3">This header</a> has lots of macros for handling various forms of
linked lists.  The version in GLIBC is a bit behind the BSD&#8217;s, because
the latter also have <code>_safe()</code> versions of some macros to aid the user
in some tricky cases, e.g. when removing entries while iterating.</p>

<p>Several types of lists are supported:</p>

<ul>
<li>LIST: Doubly linked list</li>
<li>SLIST: Single linked list</li>
<li>STAILQ: Single linked tail queue</li>
<li>SIMPLEQ: Simple queue</li>
<li>TAILQ: Tail queue</li>
</ul>


<p>Here&#8217;s a few of them, this example for doubly linked lists:</p>

<ul>
<li><code>LIST_INIT()</code></li>
<li><code>LIST_EMPTY()</code></li>
<li><code>LIST_FIRST()</code></li>
<li><code>LIST_NEXT()</code></li>
<li><code>LIST_REMOVE()</code></li>
<li><code>LIST_FOREACH()</code></li>
<li><code>LIST_INSERT_AFTER()</code></li>
<li><code>LIST_INSERT_BEFORE()</code></li>
<li><code>LIST_INSERT_HEAD()</code></li>
</ul>


<p>I wrote a <a href="https://github.com/troglobit/toolbox/blob/master/tailq-demo.c">demo of the TAILQ API</a> a couple of years ago.</p>

<h2>Other Noteworthy API&#8217;s</h2>

<p>Other functions worthy of mentioning here are:</p>

<h3><code>stdlib.h</code></h3>

<ul>
<li><code>bsearch()</code></li>
<li><code>qsort()</code></li>
</ul>


<h3><code>glob.h</code></h3>

<ul>
<li><code>glob()</code></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/13/en-vanlig-dag-pa-jobbet-swedish/">En Vanlig Dag PÃ¥ Jobbet (SWEDISH)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-11-13T20:57:29+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>8:57 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I vanlig ordning bashar vi DNS pÃ¥ jobbet, pga ofungerar <em>hÃ¥rt</em> Ã¶ver VPN
fÃ¶r de flesta. (Ja vi kÃ¶r alla Linux, utom cheferna som envisas med att
anvÃ¤nda nÃ¥got ur gamla testamentet.) HÃ¤r fÃ¶ljer ett utdrag frÃ¥n vÃ¥r IRC:</p>

<pre><code>14:32 &lt;n00b&gt; Success! Ãntligen fick jag ordning pÃ¥ DNS via guest
      wifi -&gt; vpn -&gt; office network. Firar med att skapa lite irc noise. :D
14:32 &lt; rooth&gt;n00b: Du har vÃ¤l fÃ¥tt den distribuerade /etc/hosts filen?
14:33 &lt; rooth&gt; !dns paperboy
14:33 &lt; |master|&gt; rooth: server028.intranet.example.com. 192.168.130.72 lazyboy lazyboy.intranet.example.com
14:33 &lt; rbot&gt; rooth: lazyboy: 192.168.130.72
14:33 &lt; rooth&gt; bottarna hjÃ¤lper dig annars =)
14:34 &lt;n00b&gt; hosts file is so... "unclean" ;)
14:35 &lt;n00b&gt; Men bra att veta att bottar kan hjÃ¤lpa. :)
14:37 &lt; rooth&gt;n00b: FÃ¶rstÃ¥r inte alls vad du menar... =)
14:37 &lt; rooth&gt;n00b: Det finns tvÃ¥ skolor pÃ¥ bygget, dns vs hosts.
14:38 &lt;n00b&gt; Oh! SÃ¥ jag har tydligen valt sida nu dÃ¥. :D
14:40 &lt; rooth&gt;n00b: dns = dark-side.
14:50 &lt; lazzer&gt;n00b: ;-)
14:52 &lt; rooth&gt;n00b: s#local dns cache#/etc/hosts# =)
14:52 &lt; moggen&gt; hehe HOSTS.TXT revival
14:52 &lt; moggen&gt; var sÃ¥ det bÃ¶rjade en gÃ¥ng i tiden
14:52 &lt; moggen&gt; innan man uppfann DNS
14:53 &lt; lazzer&gt; Vi mÃ¥ste komma pÃ¥ ett bra system fÃ¶r att dela vÃ¥ra hosts-filer.
14:53 &lt;n00b&gt; A long time ago, in a network far far away...
14:53 &lt;n00b&gt; git repo for shared hosts fil, annan conf?
14:57 &lt;n00b&gt; Finns det nÃ¥gon slags share-mekanism vad gÃ¤ller grundlÃ¤ggande test
             setup btw? Eller Ã¤r det fÃ¶r svÃ¥rt att fÃ¥ till generell grund conf
             fÃ¶r lokal test setup?
15:38 &lt; troglobit&gt; Ãh, har ni Ã¶ppnat DNS-lÃ¥dan! LOL =)
15:38  * troglobit kÃ¶r med hosts-fil, sÃ¥klart ;)
15:40 &lt; lazzer&gt; troglobit: bra val ;-=
15:44 &lt; rooth&gt; troglobit: Jag tyckte det var dags =)
16:00 &lt; moggen&gt; troglobit: upptÃ¤ckte nÃ¤r jag jobbade hemma att man fÃ¥r "fel" IP pÃ¥
                web.example.com om man inte sitter pÃ¥ kontors-IP... hosts ftw.
16:22 &lt; troglobit&gt; moggen: HÃ¤rligt att se att du sÃ¥llat dig till den enda sanna lÃ¤ran ;)
16:59 &lt; rooth&gt; =)
17:06 &lt; wkz&gt; moggen,troglobit : another one bites the dust... :)
18:12 &lt; n00b2&gt; Helgen Ã¤r rÃ¤ddad vpn-dosan Ã¥terfunnen
20:19 &lt; troglobit&gt; wkz: DNS Ã¤r en kvarleva av ett dÃ¶ende system. Kom, anslut dig
               till oss istÃ¤llet, vi kÃ¤mpar fÃ¶r rÃ¤ttvisa, sÃ¤kerhet, och fria
               statiska /etc/hosts-uppdateringar i galaxen!
20:19 &lt; wkz&gt; troglobit: NEVER!
20:20 &lt; troglobit&gt; wkz: *Feel* the power of the dark side!
20:20 &lt; wkz&gt; troglobit: LOL
20:20 &lt; troglobit&gt; wkz: :-D
</code></pre>

<p>Some names have been changed to protect the innocent, the rest are Sith
Lords or Jedi Knights.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/10/awesome-changing-next-slash-prev-tune-in-spotify/">Awesome: Changing Next/Prev Tune in Spotify</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-11-10T12:14:09+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:14 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Back to using the <a href="http://awesome.naquadah.org/">Awesome WM</a> in Ubuntu.
This time I&#8217;m setting up everything from scratch and first up is fixing
keybindings to control my main music player: Spotify!</p>

<p>Edit your <code>~/.config/awesome/rc.lua</code> with Emacs (obviously).  If you do
not have an rc file, simply copy the system <code>/etc/xdb/awesome/rc.lua</code>:</p>

<pre><code>globalkeys = awful.util.table.join(globalkeys,
           awful.key({}, "XF86AudioRaiseVolume", function () awful.util.spawn("amixer -D pulse sset Master 5%+", false) end),
       awful.key({}, "XF86AudioLowerVolume", function () awful.util.spawn("amixer -D pulse sset Master 5%-", false) end),
       awful.key({}, "XF86AudioMute", function() awful.util.spawn('amixer -D pulse sset Master 1+ toggle') end),
       awful.key({ }, "XF86AudioNext", function () awful.util.spawn("dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next")end),
       awful.key({ }, "XF86AudioPrev", function () awful.util.spawn("dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous")end),
       awful.key({ }, "XF86AudioPlay", function () awful.util.spawn("dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause")end),
       awful.key({ }, "XF86AudioStop", function () awful.util.spawn("dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Stop")end))
root.keys(globalkeys)
</code></pre>

<p>That&#8217;s it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/07/stray-puppies/">Stray Puppies</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-11-07T02:32:12+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:32 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sometimes I just cannot help myself.  It&#8217;s like finding a stray puppy,
or abandonded kitten &#8230;</p>

<p>&#8230; I recently decided to adopt <a href="/mini-snmpd.html">mini-snmpd</a> since the
<a href="http://members.aon.at/linuxfreak/linux/mini_snmpd.html">original upstream</a> site had passed into the great beyond.  At this
point in my life almost everyone I know can tell you I have no warm
fuzzy feels for SNMP, at all.  So why did I even consider this to begin
with?!</p>

<p>Well, I have to confess that there are certain things that SNMP can be
really useful for.  Most of it is remote monitoring, and since I work
with embedded systems a lot, SNMP can be quite a handy tool.</p>

<p>I first ran into mini-snmpd when I created <a href="https://github.com/troglobit/troglos">TroglOS</a>, by forking
<a href="https://github.com/hno/miniroot">miniroot</a>, and what struck me immediately was how small and simple
it was.  The code was also in reasonably good shape, so it had passed my
initial quality control.  Suddenly one day I could no longer download it
when building TroglOS, so I had to do something!</p>

<p>My plans for mini-snmpd are quite humble.  I&#8217;m currently cleaning it up
a bit, adding configure script for all optional features, testing
portability to FreeBSD and <a href="https://github.com/javiplx/mini-snmpd">integrating (good) patches</a> from various
sources scattered around the web.</p>

<p>I will not add lots of new features, but as always I&#8217;m your humble patch
monkey, so if you <a href="https://github.com/troglobit/mini-snmpd">submit a pull reqeust</a> at GitHub it&#8217;ll probably be
merged and put into a release.</p>

<p>Cheers</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/09/summer-of-code-2015/">Summer of Code 2015</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-09T21:49:13+02:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:49 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Summer is now slowly fading away, and what a summer it has been here in
Sweden!  For someone who isn&#8217;t a fan of the summer heat it has been an
awesome time for brain work, and in my case work on my open source
projects! :-)</p>

<p>Due to my not really taking much vacation previous years I had saved up
for ten weeks (10) this year!  It was really worth it, and for the first
time in many years I actually feel rested.</p>

<p>So what&#8217;s new?  Well, this summer I&#8217;ve released a <strong>major</strong> upgrade to
<a href="/pimd.html">pimd</a>, which received <em>PIM-SSM</em> and full <em>IGMPv3</em> support!
<a href="/inadyn.html">Inadyn</a> has seen two releases, one feature release with
support for Windows and improved support for custom DDNS providers, and
one bugfix release (today).  My own FTP/TFTP server <a href="/uftpd.html">uftpd</a>
has also got a bit of an overhaul to improve both concurrency and
improved support for various popular clients (Firefox and wget) &#8211; I
released v1.9 of uftpd as a birthday present to myself! ;-)</p>

<p>I&#8217;ve done some other minor work as well, on the &#8220;new&#8221; <a href="https://github.com/troglobit/netcalc">netcalc</a>, IPv6
and IPv4 subnet calculator, as well as <a href="https://github.com/troglobit/watchdogd">watchdogd</a> and <a href="/finit.html">finit</a>.  The
latter two have however not seen any releases yet, but both have <em>major</em>
v2.0 releases with lots of very interesting features that are going to
be revealed soon!</p>

<p>For watchdogd several big improvements to system monitoring (loadavg,
file descriptors, RAM) as well as a very advanced process monitoring
(instrumentation) API is being added.  Finit however is the crown in
making, it is being converted to support multiple instances of services
and to be a fully event driven.  I&#8217;m extremely excited about Finit!</p>

<p>Oh, and don&#8217;t worry &#8230; I did manage to get some actual real downtime on
the beach as well! ;-)</p>

<!--
  -- Local Variables:
  -- mode: markdown
  -- End:
  -->

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/02/howto-using-lite-with-a-git-based-application/">HowTo: Using -lite With a GIT-based Application</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-02T17:11:55+02:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2015</span></span> <span class='time'>5:11 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Years ago while looking for a fast <a href="https://en.wikipedia.org/wiki/Init">init</a> replacement for <a href="http://westermo.com/">work</a>,
I found <a href="http://helllabs.org/finit/">Finit</a>.  Originally written by <a href="https://github.com/cmatsuoka">Claudio Matsuoka</a> to act
as a drop-in replacement for the <a href="https://en.wikipedia.org/wiki/Asus_Eee_PC">Asus EeePC</a> <a href="http://wiki.eeeuser.com/boot_process:the_boot_process">fastinit</a>, <em>&#8220;gaps
filled with frog DNA &hellip;&#8221;</em></p>

<p>Until I found Finit I had always been in awe of those venturing into the
realm of <a href="http://0pointer.net/blog/">PID 1</a>.  However, learning from the simplicity of Claudio&#8217;s
code I realized that although PID 1 at times is indistinguishable from
magic, it is really not that hard to master.  <a href="https://github.com/troglobit/finit">My version of Finit</a>
is available on GitHub.</p>

<p>The code is open sourced under the very liberal <a href="http://opensource.org/licenses/MIT">MIT/X11 license</a>,
and much of its frog DNA has proven very useful to me over the years.
This blog post is about how that frog DNA can help you fill gaps in your
projects &hellip;</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/07/02/howto-using-lite-with-a-git-based-application/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/01/howto-push-to-multiple-git-repos-with-one-command/">HowTo: Push to Multiple GIT Repos With One Command</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-01T00:42:17+02:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>12:42 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So, now that I have http://git.troglobit.com setup as a backup GIT repo
to https://github.com/troglobit, I needed a <em>simple</em> way of always
pushing to both repos &#8211; best way for me is to always hook into my
regular work flow, otherwise I&#8217;d just forget.  The <a href="1">git-remote(1)</a>
man page describes the new <code>set-url --add</code> sub-command:</p>

<pre><code>git remote set-url --add origin troglobit.com:/srv/git/watchdogd.git
</code></pre>

<p>Now, with a simple <code>git push</code> followed by <code>git push --tags</code> I had now
pushed to both the GitHub repo as well as my own server!</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/07/01/howto-push-to-multiple-git-repos-with-one-command/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/30/howto-apache-with-gitweb-on-debian-8-dot-1/">HowTo: Apache With Gitweb on Debian 8.1</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-30T23:13:48+02:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:13 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m posting this in case anyone else gets stuck setting up <a href="http://www.apache.org">Apache</a>
with <a href="http://git-scm.com/docs/gitweb">Gitweb</a>.  Also as a reminder to myself in case I ever need to
set up this all over again.</p>

<ol>
<li>You have all your eggs in one basket (GitHub), and</li>
<li>You really like that shiny basket, but</li>
<li>You know you&#8217;re clumsy and usually drop baskets yourself.</li>
<li>You are wise (yes you are!) and realize you need another basket, so</li>
<li>You set up a server and a domain yourself &#8230;</li>
</ol>


<p>OK.  Let&#8217;s start simple, since you are already running the latest Debian
you fire up the command line and install the basics:</p>

<pre><code>sudo apt-get install gitweb apache2
</code></pre>

<p>So it&#8217;ll complain, you&#8217;ll clarify your request and soon all required
packages are on your server.  Now what?</p>

<p>Debian has already set up http://localhost/gitweb for you, and if you
have a domain already you should go ahead and edit the master file for
that:</p>

<pre><code>editor /etc/apache2/sites-available/000-default.conf
service apache2 reload
</code></pre>

<p>If you want to use that for your gitweb needs, then you&#8217;re done!</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/06/30/howto-apache-with-gitweb-on-debian-8-dot-1/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/06/inetd-support-in-finit-v1-dot-12/">Inetd Support in Finit v1.12</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-06T22:34:45+01:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:34 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A steady flow of features, and releases, is key to keeping any project
alive.  Recently I ticked off another item in the <a href="/finit.html">Finit</a>
TODO list &#8230;</p>

<p>Finit v1.12 now comes with a built-in inetd!  You no longer need an
external inetd daemon to launch services on demand.</p>

<p>The good news doesn&#8217;t stop there, this little inetd actually supports a
poor man&#8217;s tcpwrappers!</p>

<pre><code>inetd ssh/tcp          nowait [2345] /sbin/dropbear -i -R -F
inetd ssh@eth0:222/tcp nowait [2345] /sbin/dropbear -i -R -F
</code></pre>

<p>With these two lines in your <code>/etc/finit.conf</code> you tell finit to launch
the <a href="https://matt.ucc.asn.au/dropbear/dropbear.html">Dropbear SSH</a>
server on demand on port 22 (default ssh/tcp port in <code>/etc/services</code>) on
<em>all</em> interfaces except on <code>eth0</code>, which in your case is the Internet
(WAN) interface, here you want SSH to run on port 222.  Actually, you
don&#8217;t want port 22 open at all on <code>eth0</code> &#8230; so finit takes care of this
for you!  Seriously, it just works, no need for messing about with that
nasty old <code>iptables</code> anymore!</p>

<p>The original UNIX inetd super server supported many protocols
internally, some of which may seem a bit odd today, and some have been
superseded by more modern protocols.</p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Echo_Protocol">echo</a></li>
<li><a href="http://en.wikipedia.org/wiki/Character_Generator_Protocol">chargen</a></li>
<li><a href="http://en.wikipedia.org/wiki/Time_Protocol">time</a></li>
<li><a href="http://en.wikipedia.org/wiki/Daytime_Protocol">daytime</a></li>
<li><a href="http://en.wikipedia.org/wiki/Discard_Protocol">discard</a></li>
</ul>


<p>Finit currently only supports one internal/built-in standard service,
<code>time</code>.  It is built as a plugin to serve as an example of how you can
extend Finit yourself.  The time service can be called either as UDP or
TCP.  To prevent security issues, the <code>time</code> protocol is disabled by
default.  To enable it you need two things:</p>

<ol>
<li>The <code>time.so</code> plugin (built by default)</li>
<li>An <code>inetd time ...</code> line in <code>/etc/finit.conf</code></li>
</ol>


<p>Assuming you&#8217;ve installed the default set of plugins, the following two
lines can be added:</p>

<pre><code>inetd time/udp   wait [2345] internal
inetd time/tcp nowait [2345] internal
</code></pre>

<p>This can be very useful for testing the inetd capabilities, your network
connection, or simply to get the time to a client where NTP for some
reason does not work, or is blocked.  For instance, you could have a GPS
setup on your server and distribute time to clients with the <code>time</code>
protocol.</p>

<p>To use it you need an <a href="http://www.aelius.com/njh/rdate/"><code>rdate</code></a>
client.  Users of <code>rdate</code> in BusyBox may need to be reminded that it
only supports TCP.</p>

<pre><code>$ rdate -pu 198.51.100.42
Sat Mar  7 08:48:58 CET 2015
</code></pre>

<p>For more info on Finit and its features, see the <a href="https://github.com/troglobit/finit/blob/master/README.md">README</a>.</p>

<p>Enjoy! ã</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/03/06/inetd-support-in-finit-v1-dot-12/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Projects</h1>
  <ul>
    <li><a href="/finit.html">Fast Init Replacement</a></li>
    <li><a href="/inadyn.html">Inadyn DDNS Client</a></li>
    <li><a href="/smcroute.html">SMCRoute Static Multicast Routing</a></li>
    <li><a href="/mrouted.html">The Original Multicast Routing Daemon</a></li>
    <li><a href="/pimd.html">The Original PIM-SM Daemon</a></li>
    <li><a href="/tetris.html">Micro Tetris&trade;</a></li>
    <li><a href="/snake.html">Micro Snake</a></li>
    <li><a href="/editline.html">Minix Editline</a></li>
    <li><a href="/mini-snmpd.html">Mini-SNMPd</a></li>
    <li><a href="/uftpd.html">Micro FTP/TFTP Daemon</a></li>
  </ul>
</section>
<section>
  <h1>HowTos</h1>
  <ul>
    <li><a href="/multicast-howto.html">Multicast</a></li>
    <li><a href="/blog/2014/09/23/howto-add-multicast-routing-support-to-the-freebsd-kernel/">MROUTING support on FreeBSD</a></li>
    <li><a href="/howto-run-pimd-on-openbsd.html">Run pimd on OpenBSD</a></li>
    <li><a href="/howto-run-pimd-on-freebsd.html">Run pimd on FreeBSD</a></li>
    <li><a href="/howto-netbsd-pkgsrc.html">Use NetBSD pre-built packages</a></li>
    <li><a href="/howto-play-with-snmp.html">Play with SNMP</a></li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/03/07/multicast-testing/">Multicast Testing, Made Easy!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/14/useful-unix-api-s/">Useful UNIX API:s</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/13/en-vanlig-dag-pa-jobbet-swedish/">En Vanlig Dag PÃ¥ Jobbet (SWEDISH)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/10/awesome-changing-next-slash-prev-tune-in-spotify/">Awesome: Changing Next/Prev Tune in Spotify</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/07/stray-puppies/">Stray Puppies</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/troglobit">@troglobit</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'troglobit',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Latest Tweets</h1>

  <a class="twitter-timeline" data-dnt="true"
     href="https://twitter.com/troglobit"
     data-widget-id="365667052100415488">Tweets by @troglobit</a>
  <script>!function(d,s,id){var
    js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Joachim Nilsson -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
